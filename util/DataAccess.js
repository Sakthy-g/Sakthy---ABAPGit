/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.declare("fcg.mdg.editbp.util.DataAccess");fcg.mdg.editbp.util.DataAccess={oChangedModel:"",oCurrentModel:"",oQueryModel:"",owizardController:"",oCPResults:"",oTNResults:"",aData:[],i18nModel:"",oValueHelpResult:"",aMatchProMandt:[],fromWizard:0,selectedRecord:null,valueHelp:function(c){var r="";var a="/ValueHelpCollection?$filter=";var b=new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/MDG_EDIT_CUSTOMER",true);var B=[];var A=a+jQuery.sap.encodeURL("ENTITY eq 'BP_Person' and ATTR_NAME eq 'TITLE_ACA1'");var o=b.createBatchOperation(A,"GET");B.push(o);b.clearBatch();b.addBatchReadOperations(B);var m=a+jQuery.sap.encodeURL("ENTITY eq 'BP_Person' and ATTR_NAME eq 'MARITALSTATUS'");var d=b.createBatchOperation(m,"GET");B.push(d);b.clearBatch();b.addBatchReadOperations(B);var C=a+jQuery.sap.encodeURL("ENTITY eq 'BP_Person' and FILTER eq 'CORRESPONDLANGUAGEISO=' and ATTR_NAME eq 'CORRESPONDLANGUAGE'");var e=b.createBatchOperation(C,"GET");B.push(e);b.clearBatch();b.addBatchReadOperations(B);var p=a+jQuery.sap.encodeURL("ENTITY eq 'BP_Root' and FILTER eq 'CATEGORY=1' and ATTR_NAME eq 'TITLE_KEY'");var f=b.createBatchOperation(p,"GET");B.push(f);b.clearBatch();b.addBatchReadOperations(B);var O=a+jQuery.sap.encodeURL("ENTITY eq 'BP_Root' and FILTER eq 'CATEGORY=2' and ATTR_NAME eq 'TITLE_KEY'");var g=b.createBatchOperation(O,"GET");B.push(g);b.clearBatch();b.addBatchReadOperations(B);var v=a+jQuery.sap.encodeURL("ENTITY eq 'BP_Address' and ATTR_NAME eq 'COUNTRY'");var h=b.createBatchOperation(v,"GET");B.push(h);b.clearBatch();b.addBatchReadOperations(B);var i=a+jQuery.sap.encodeURL("ENTITY eq 'BP_WorkplaceIntAddressVers' and ATTR_NAME eq 'ADDR_VERS'");var j=b.createBatchOperation(i,"GET");B.push(j);b.clearBatch();b.addBatchReadOperations(B);var P=a+jQuery.sap.encodeURL("ENTITY eq 'BP_IdentificationNumber' and ATTR_NAME eq 'IDENTIFICATIONTYPE' and FILTER eq 'BU_TYPE=1'");var k=b.createBatchOperation(P,"GET");B.push(k);b.clearBatch();b.addBatchReadOperations(B);var t=a+jQuery.sap.encodeURL("ENTITY eq 'BP_TaxNumber' and ATTR_NAME eq 'TAXTYPE'");var l=b.createBatchOperation(t,"GET");B.push(l);b.clearBatch();b.addBatchReadOperations(B);var n=a+jQuery.sap.encodeURL("ENTITY eq 'BP_IdentificationNumber' and ATTR_NAME eq 'IDENTIFICATIONTYPE' and FILTER eq 'BU_TYPE=2'");var q=b.createBatchOperation(n,"GET");B.push(q);b.clearBatch();b.addBatchReadOperations(B);B=[];b.submitBatch(function(s,u){r=s.__batchResponses;},null,false);b.clearBatch();this.oValueHelpResult=r;return r;},setFromWizardFlag:function(f){this.fromWizard=f;},setSelectedRecord:function(r){this.selectedRecord=r;},getValueHelpData:function(){if(this.oValueHelpResult!==""){return this.oValueHelpResult;}else{this.valueHelp();}},readData:function(q,c){var r=null;var d=new sap.ui.model.odata.ODataModel(c.getView().getModel().sServiceUrl,false);d.read(q,null,null,false,function(a){r=a;});return r;},readDataAsynchronous:function(q,c,C){var r=null;var d=new sap.ui.model.odata.ODataModel(c.getView().getModel().sServiceUrl,false);d.read(q,null,null,true,function(a){C(a);},function(e){C();});return r;},checkCurrentModel:function(){if(this.oCurrentModel===""){return false;}else{return true;}},setCurrentModel:function(m){this.oCurrentModel=m;},getCurrentModel:function(){return this.oCurrentModel;},getAddressData:function(c,p,s){this.oS3Controller=s;var C=p;var b='BP_AddressesRel/';C=C+b;return C;},getDataFromPath:function(o,p){var a=p.split("/");if(a.length===1){return o[a[0]];}return this.getDataFromPath(o[a[0]],a.slice(1).join("/"));},changedEntries:function(c,q){this.oChangedModel=c;this.oQueryModel=q;},setTNResults:function(r){this.oTNResults=r;},getTNResults:function(){return this.oTNResults;},addBatchOperation:function(m,p,b){var B=m.createBatchOperation(p,"GET");b.push(B);m.clearBatch();m.addBatchReadOperations(b);},performSubmitBatch:function(m,s){var l=this;var e=false;var i="";this.aData=[];m.submitBatch(function(o,r){var a="";var c="";for(i=0;i<r.data.__batchResponses.length;i++){var d=r.data.__batchResponses[i];l.aData.push(d);if(d.response!==undefined){for(i=0;i<jQuery.parseJSON(d.response.body).error.innererror.errordetails.length;i++){if(a!==""){a=a+"\n";}a=a+jQuery.parseJSON(d.response.body).error.innererror.errordetails[i].message;c=c+jQuery.parseJSON(d.response.body).error.innererror.errordetails[i].code;e=true;}}}if(s!==undefined){s.setFinOdataError(e,a,c);}},null,false);},getBatchData:function(){return this.aData;},seti18nModel:function(i){this.i18nModel=i;},readMatchProfileFields:function(m){var e=m.getServiceMetadata().dataServices.schema[0].entityType;for(var i=0;i<e.length;i++){if(e[i].property!==undefined){for(var j=0;j<e[i].property.length;j++){if(e[i].property[j].extensions!==undefined){for(var k=0;k<e[i].property[j].extensions.length;k++){if(e[i].property[j].extensions[k].name==="IS_MATCH_PROFILE_ATTR"&&e[i].property[j].extensions[k].value==="X"){var a={attr:e[i].property[j].name,entity:e[i].name};this.aMatchProMandt.push(a);}if(e[i].property[j].extensions[k].name==="IS_MATCH_PROFILE_MAND"&&e[i].property[j].extensions[k].value==="X"){for(var l=0;l<e[i].property[j].extensions.length;l++){if(e[i].property[j].extensions[l].name==="label"){this.mandatoryFieldsStr=this.mandatoryFieldsStr+e[i].property[j].extensions[l].value+",";break;}}this.aMatchProMandt.push(e[i].property[j].name);}}}}}}},setCtrlInstance:function(c){this.owizardController=c;},getTimeDependecy:function(m){var e=m.getServiceMetadata().dataServices.schema[0].entityType;var t="",a="";for(var j=0;j<e.length;j++){if(e[j].name==="BP_Root"){a=e[j].extensions;break;}}if(a===""){return t;}for(var i=0;i<a.length;i++){if(a[i].name==="IsTdRelSwitchActive"){t=a[i].value;return t;}}return t;}};
