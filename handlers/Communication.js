/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.declare("fcg.mdg.editbp.handlers.Communication");fcg.mdg.editbp.handlers.Communication={oController:"",oCurrentDataModel:"",oCurrentDelDataModel:"",oCreateModel:[],oDeleteModel:[],oChangeModel:[],query:"",createdArray:"",finalQueryModel:[],finalChnQueryModel:[],addressModel:"",vIdCounterTel:0,vNewTelField:"",vIdCounterFax:0,vNewFaxField:"",vIdCounterMob:0,vNewMobField:"",vIdCounterEmail:0,vNewEmailField:"",vIdCounterURI:0,vNewURIField:"",oIavFormId:0,oIavNewForm:"",oEditIAVModel:"",oAddressCreate:"",oAddressContactCreate:"",oAddressIAVOrgCreate:"",vOldCountry:"",vCountry:"",CurrLayout:"",vReEditIndex:"",oReEditCrtModel:"",oReEditChngModel:"",selectedAddVersion:[],queryChnModel:[],queryCrtModel:[],addresscrtModel:"",addresschnModel:"",addressdelModel:"",aReEditData:[],aRemoveFields:[],vStdAddress:"",vCommChanged:1,numPhn:0,numMob:0,numFax:0,numEmail:0,numURI:0,numIAV:0,selectedIndex:0,aChangedAddress:[],aDelAddressId:[],oValueHelpAddressVersion:{},vIavFlag:false,oRegionModel:"",vRegionFlag:false,vRegionTextFlag:false,vLangu:"",vAD_ID:0,oDataModel:"",oCountDeepEntities:[],aErrorStateFlag:[],clearGlobalVariables:function(c){if(this.oAddressCreate!==undefined&&this.oAddressCreate!==""){try{this.oAddressCreate.destroy();}catch(e){}}if(this.oAddressContactCreate!==undefined&&this.oAddressContactCreate!==""){try{this.oAddressContactCreate.destroy();}catch(e){}}if(this.oAddressIAVOrgCreate!==undefined&&this.oAddressIAVOrgCreate!==""){try{this.oAddressIAVOrgCreate.destroy();}catch(e){}}this.oAddressCreate="";this.oAddressContactCreate="";this.oAddressIAVOrgCreate="";this.oCurrentDataModel="";this.oCurrentDelDataModel="";this.oRegionModel="";this.addressModel="";this.vLangu="";this.oCreateModel=[];this.oChangeModel=[];this.oDeleteModel=[];this.queryChnModel=[];this.selectedAddVersion=[];this.queryCrtModel=[];this.aChangedAddress=[];this.aChangedAddress=[];this.finalChnQueryModel=[];this.vOldCountry="";this.vCountry="";this.CurrLayout="";this.oValueHelpAddressVersion={};this.vIavFlag=false;this.vRegionFlag=false;this.vRegionTextFlag=false;c.oDetailComm="";this.vAD_ID=0;c.isAddressVisited="";this.oDataModel="";this.aErrorStateFlag=[];this.aDelAddressId=[];this.oCountDeepEntities=[];},handleCommunication:function(c){this.oController=c;this.vReEditIndex="";this.vOldCountry="";this.selectedIndex=0;this.aErrorStateFlag=[];var r;fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion={};if(c.getView().byId("communicationLayout").getItems().length>0){c.getView().byId("communicationLayout").destroyItems();}if(c.reEdit!=="X"){if(c.vCurrentActionId==="createRB"){this.createCommunicationData(c);}else if(c.vCurrentActionId==="changeRB"){this.editCommunication(this.oController.oDetailComm);}else if(c.vCurrentActionId==="deleteRB"){this.editCommunication(this.oController.oDetailComm);}}else if(c.reEdit==="X"){c.oWizard.invalidateStep(c.getView().byId("communicationStep"));var R=c.reEditSource.getParent().getParent().getParent();var v=R.getParent();this.vReEditIndex=v.indexOfContent(R);var a=new sap.ui.model.json.JSONModel();if(this.oController.vCurrentActionId==="createRB"){r=this.oCreateModel[this.vReEditIndex].body;}else if(this.oController.vCurrentActionId==="changeRB"){r=this.queryChnModel[this.vReEditIndex].body;}a.setData(r);this.loadCommlayout(c,r);if(c.sCategory==="1"){sap.ui.getCore().byId("INP-BP_Address-LANGU").setVisible(false);sap.ui.getCore().byId("INP-BP_Address-LANGU__TXT").setVisible(false);sap.ui.getCore().byId("INP-BP_Address-PO_BOX").setVisible(false);sap.ui.getCore().byId("INP-BP_Address-POSTL_COD3").setVisible(false);}this.oAddressCreate.setModel(a);this.createCommIAVFields(r);}},countDeepEntities:function(r,a){var n={};var i;for(i=0;i<r.BP_AddressesRel.results.length;i++){if(a===i){if(r.BP_AddressesRel.results[i].BP_CommPhoneRel.results!==undefined){n.numPhn=r.BP_AddressesRel.results[i].BP_CommPhoneRel.results.length;}else{n.numPhn=0;}if(r.BP_AddressesRel.results[i].BP_CommMobileRel.results!==undefined){n.numMob=r.BP_AddressesRel.results[i].BP_CommMobileRel.results.length;}else{n.numMob=0;}if(r.BP_AddressesRel.results[i].BP_CommFaxRel.results!==undefined){n.numFax=r.BP_AddressesRel.results[i].BP_CommFaxRel.results.length;}else{n.numFax=0;}if(r.BP_AddressesRel.results[i].BP_CommEMailRel.results!==undefined){n.numEmail=r.BP_AddressesRel.results[i].BP_CommEMailRel.results.length;}else{n.numEmail=0;}if(r.BP_AddressesRel.results[i].BP_CommURIRel.results!==undefined){n.numURI=r.BP_AddressesRel.results[i].BP_CommURIRel.results.length;}else{n.numURI=0;}if(this.oController.sCategory==="1"){if(r.BP_AddressesRel.results[i].BP_AddressVersionsPersRel.results!==undefined){n.numIAV=r.BP_AddressesRel.results[i].BP_AddressVersionsPersRel.results.length;}else{n.numIAV=0;}}else{if(r.BP_AddressesRel.results[i].BP_AddressVersionsOrgRel.results!==undefined){n.numIAV=r.BP_AddressesRel.results[i].BP_AddressVersionsOrgRel.results.length;}else{n.numIAV=0;}}this.oCountDeepEntities.splice(i,1);this.oCountDeepEntities.splice(a,0,n);}n={};}},undoAddressChanges:function(a,e){var p="/BP_RootCollection(BP_GUID="+this.oController.sItemPath+")?$expand=";var b="";var r="";var i,j;var A;var q=p+"BP_AddressesRel,BP_AddressesRel/BP_CommPhoneRel,BP_AddressesRel/BP_CommMobileRel,BP_AddressesRel/BP_CommFaxRel,BP_AddressesRel/BP_CommEMailRel,BP_AddressesRel/BP_CommURIRel,";if(this.oController.sCategory==="1"){q=q+"BP_AddressesRel/BP_AddressVersionsPersRel/BP_AddressPersonVersionRel";}else{q=q+"BP_AddressesRel/BP_AddressVersionsOrgRel";}if(a===0){var c=this.getAddressesUsedByCP();if(c.indexOf(this.oCreateModel[e].body.AD_ID)!==-1){this.showPopUp(this.oController,this.oController.i18nBundle.getText("ERROR_ADDR_REVERT"));return"ERROR";}for(i=0;i<this.oController.oDupCheckData.length;){if(this.oController.oDupCheckData[i].createdIndex===this.oCreateModel[e].index&&this.oController.oDupCheckData[i].entity==="BP_Address"){this.oController.oDupCheckData.splice(i,1);}else{i++;}}this.oCreateModel.splice(e,1);}else if(a===1){for(i=0;i<this.oController.oDupCheckData.length;){if(this.oController.oDupCheckData[i].entityKey.split("-")[2]===this.queryChnModel[e].body.AD_ID&&this.oController.oDupCheckData[i].entity==="BP_Address"){this.oController.oDupCheckData.splice(i,1);}else{i++;}}for(i=0;i<this.oController.oDetailComm.BP_AddressesRel.results.length;i++){if(this.oController.oDetailComm.BP_AddressesRel.results[i].AD_ID===this.queryChnModel[e].body.AD_ID){r=fcg.mdg.editbp.util.DataAccess.readData(q,this.oController);this.countDeepEntities(r,i);this.oController.oDetailComm.BP_AddressesRel.results[i]=r.BP_AddressesRel.results[i];}}if(this.oChangeModel.length!==0){for(i=0;i<this.oChangeModel.length;){if(this.oChangeModel[i].AD_ID===this.queryChnModel[e].body.AD_ID){this.oChangeModel.splice(i,1);}else{i++;}}}for(i=0;i<this.aChangedAddress.length;i++){if(this.aChangedAddress[i]===this.queryChnModel[e].body.AD_ID){this.aChangedAddress.splice(i,1);break;}}A=this.queryChnModel[e].body.AD_ID;this.queryChnModel.splice(e,1);}else if(a===2){b=this.aDelAddressId.indexOf(this.oDeleteModel[e].body.AD_ID);A=this.oDeleteModel[e].body.AD_ID;this.oDeleteModel.splice(e,1);r=fcg.mdg.editbp.util.DataAccess.readData(q,this.oController);this.countDeepEntities(r,i);this.oController.oDetailComm.BP_AddressesRel.results.push(r.BP_AddressesRel.results[b]);}if(a===1||a===2){for(i=0;i<this.oController.aEntityValue.length;i++){if("communicationRB-"+A===this.oController.aEntityValue[i]){this.oController.aEntityValue.splice(i,1);break;}}}var E=this.oController.bpHookReadAddressData(this,q,r);if(E!==undefined){r=E;}},handleSelectItemForComm:function(w){this.oController=w;fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion={};if(this.oController.vCurrentActionId==="changeRB"){var a="";if(sap.ui.getCore().byId("selectDataListRBG")===undefined){a=0;}else{a=sap.ui.getCore().byId("selectDataListRBG").getSelectedIndex();}this.selectedIndex=a;this.getAddressDetailsPage(this.oController.oDetailComm,a);}else if(w.vCurrentActionId==="deleteRB"){this.getAddressDetailsPage(this.oController.oDetailComm,a);}},loadCommlayout:function(c,r){if(this.oAddressCreate===""){this.checkAddressCountry(r,c);}else{try{this.oAddressCreate.destroy();}catch(e){}this.checkAddressCountry(r,c);}if(this.oAddressContactCreate===""){this.oAddressContactCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressContactEdit',c);}else{try{this.oAddressContactCreate.destroy();}catch(e){}this.oAddressContactCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressContactEdit',c);}if(this.oAddressIAVOrgCreate===""){this.oAddressIAVOrgCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.EditIAVAddressOrg',c);}else{try{this.oAddressIAVOrgCreate.destroy();}catch(e){}this.oAddressIAVOrgCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.EditIAVAddressOrg',c);}c.getView().byId("communicationLayout").destroyItems();c.getFileUploadData("communicationLayout");c.getView().byId("communicationLayout").addItem(this.oAddressCreate);c.getView().byId("communicationLayout").addItem(this.oAddressContactCreate);c.getView().byId("communicationLayout").addItem(this.oAddressIAVOrgCreate);},checkAddressCountry:function(r,c){if(r===undefined||r.COUNTRY!=="US"){this.oAddressCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressEdit',c);}else{if(r.COUNTRY==="US")this.oAddressCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressEditUS',c);}},createCommunicationDataModel:function(w){fcg.mdg.editbp.handlers.Communication.oEditIAVModel="";if(w.vCurrentActionId==="createRB"){fcg.mdg.editbp.handlers.Communication.onCreate(w);}else if(w.vCurrentActionId==="changeRB"){fcg.mdg.editbp.handlers.Communication.onChange(w);}else if(w.vCurrentActionId==="deleteRB"){fcg.mdg.editbp.handlers.Communication.onDelete(w);}},createCommunicationData:function(c){c.getView().byId("actionStep").setNextStep(c.getView().byId("communicationStep"));this.oController=c;this.createdArray=[];this.finalQueryModel=[];this.loadCommlayout(c);fcg.mdg.editbp.handlers.Communication.handleDisableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);fcg.mdg.editbp.handlers.Communication.handleDisableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);fcg.mdg.editbp.handlers.Communication.handleDisableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);fcg.mdg.editbp.handlers.Communication.handleDisableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);fcg.mdg.editbp.handlers.Communication.handleDisableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);if(c.sCategory==="1"){sap.ui.getCore().byId("INP-BP_Address-LANGU").setVisible(false);sap.ui.getCore().byId("INP-BP_Address-LANGU__TXT").setVisible(false);sap.ui.getCore().byId("INP-BP_Address-PO_BOX").setVisible(false);sap.ui.getCore().byId("INP-BP_Address-POSTL_COD3").setVisible(false);}},onChange:function(){var a="";var f=0;if(sap.ui.getCore().byId("selectDataListRBG")===undefined){a=0;}else{a=sap.ui.getCore().byId("selectDataListRBG").getSelectedIndex();}var c=(JSON.parse(JSON.stringify(this.oController.changedArray)));var u;var b={};for(var i=0;i<c.length;){if(c[i].action==="N"||c[i].action==="D"){b.action=c[i].action;}else{b.action="U";}u="{";b.header=c[i].entityKey;b.entity=c[i].entity;if(c[i].createdIndex!==undefined){b.currentEntityKey=c[i].createdIndex;}if(c[i].currentIndex!==undefined){b.currentEntityKey=c[i].currentIndex;}if(b.action!=="D"){if(c[i].key!==undefined){u=u+"\""+c[i].field+"\":\""+c[i].key+"\",";u=u+"\""+c[i].field+"__TXT"+"\":\""+c[i].value+"\",";}else{u=u+"\""+c[i].field+"\":\""+c[i].value+"\",";}for(var j=i+1;j<c.length;){if(c[i].entity===c[j].entity&&((c[i].createdIndex===c[j].createdIndex&&c[i].createdIndex!==undefined)||(c[i].currentIndex===c[j].currentIndex&&c[i].currentIndex!==undefined))&&c[i].action===c[j].action){if(c[j].key!==undefined){u=u+"\""+c[j].field+"\":\""+c[j].key+"\",";u=u+"\""+c[j].field+"__TXT"+"\":\""+c[j].value+"\",";}else{u=u+"\""+c[j].field+"\":\""+c[j].value+"\",";}c.splice(j,1);}else{j++;}}u=u.substring(0,u.length-1);}u=u+"}";c.splice(i,1);b.body=JSON.parse(u);this.finalQueryModel.push(b);for(var q=0;q<this.finalChnQueryModel.length;q++){if(this.finalChnQueryModel[q].action===b.action&&this.finalChnQueryModel[q].currentEntityKey===b.currentEntityKey&&this.finalChnQueryModel[q].entity===b.entity&&this.finalChnQueryModel[q].header===b.header){for(j=0;j<Object.keys(b.body).length;j++){for(var k=0;k<Object.keys(this.finalChnQueryModel[q].body).length;k++){if(Object.keys(this.finalChnQueryModel[q].body)[k]===Object.keys(b.body)[j]&&Object.keys(this.finalChnQueryModel[q].body)!=="undefined"){this.finalChnQueryModel[q].body[Object.keys(this.finalChnQueryModel[i].body)[k]]=b.body[Object.keys(b.body)[j]];this.finalChnQueryModel[q].body[Object.keys(this.finalChnQueryModel[q].body)[k]]=b.body[Object.keys(b.body)[j]];f=1;}}}}}if(f===0){this.finalChnQueryModel.push(b);}else{f=0;}b={};}this.setDeepEntityInChangedModel();var C={};var d;if(this.oController.reEdit!=="X"){d=this.currentModel.getData();if(this.oController.changedArray.length!==0||this.aRemoveFields.length!==0){C.body=this.currentModel.getData();C.entity="BP_Addresses";if(this.oController.changedArray.length!==0)C.changes=this.finalQueryModel;if(d["EDIT"]!=="X"){C.index=this.vCommChanged++;C.SRecord=a;d["INDEX"]=C.index;this.queryChnModel.push(C);this.aChangedAddress.push(d.AD_ID);}else{this.queryChnModel[d.INDEX]=C;}d=this.addressModelHandling(d,this.oController.vCurrentActionId);this.addresschnModel=d;this.aRemoveFields=[];}}if(this.oController.reEdit==="X"){d=this.queryChnModel[this.vReEditIndex].body;this.oReEditChngModel=this.addressModelHandling(d,this.oController.vCurrentActionId);this.aRemoveFields=[];}var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();w.bpHookOnChangeOfAddress(this,w);},setDeepEntityInChangedModel:function(){var c={};var C=0;var i;for(i=0;i<this.finalChnQueryModel.length;i++){if(this.finalChnQueryModel[i].action==="D"){c.body="D";c.entity=this.finalChnQueryModel[i].entity;c.changes=this.finalChnQueryModel[i].body;c.header=this.finalChnQueryModel[i].header;c.AD_ID=this.finalChnQueryModel[i].header.split("'")[3];c.key=this.finalChnQueryModel[i].currentEntityKey;}else if(this.finalChnQueryModel[i].action==="N"){c.body="N";c.entity=this.finalChnQueryModel[i].entity;c.changes=this.finalChnQueryModel[i].body;c.header=this.finalChnQueryModel[i].header;c.AD_ID=this.finalChnQueryModel[i].header.split("'")[3];c.key=this.finalChnQueryModel[i].currentEntityKey;}else if(this.finalChnQueryModel[i].action==="U"){c.body="U";c.entity=this.finalChnQueryModel[i].entity;c.changes=this.finalChnQueryModel[i].body;c.AD_ID=this.finalChnQueryModel[i].header.split("'")[3];c.header=this.finalChnQueryModel[i].header;c.key=this.finalChnQueryModel[i].currentEntityKey;}for(var j=0;j<this.oChangeModel.length;j++){if(this.finalChnQueryModel[i].action===this.oChangeModel[j].body&&this.oChangeModel[j].entity===this.finalChnQueryModel[i].entity&&this.oChangeModel[j].header===this.finalChnQueryModel[i].header&&this.oChangeModel[j].key===this.finalChnQueryModel[i].currentEntityKey&&this.oChangeModel[j].AD_ID===this.finalChnQueryModel[i].header.split("'")[3]&&this.oChangeModel[j].changes===this.finalChnQueryModel[i].body){C=1;c={};}}if(C===0){this.oChangeModel.push(c);}else{C=0;}c={};}},onChange_Create:function(e){fcg.mdg.editbp.handlers.Communication.oController.onChange(e);},onDelete:function(c){var i,j;var d={};var s="";if(sap.ui.getCore().byId("selectDataListRBG")!==undefined){s=sap.ui.getCore().byId("selectDataListRBG").getSelectedIndex();}else{s=0;}d.body=this.oCurrentDelDataModel.BP_AddressesRel.results[s];d.header="BP_AddressCollection(BP_GUID="+c.sItemPath+",AD_ID='"+d.body.AD_ID+"')";if(this.aChangedAddress.length>0){if(this.aChangedAddress.indexOf(d.body.AD_ID)>-1){var C=this.aChangedAddress.indexOf(d.body.AD_ID);this.aChangedAddress.splice(C,1);if(this.oChangeModel.length!==0){for(i=0;i<this.oChangeModel.length;){if(this.oChangeModel[i].AD_ID===this.queryChnModel[C].body.AD_ID){this.oChangeModel.splice(i,1);}else{i++;}}}if(this.finalChnQueryModel.length!==0){for(i=0;i<this.finalChnQueryModel.length;){if(this.finalChnQueryModel[i].header.split("'")[3]===this.queryChnModel[C].body.AD_ID){this.finalChnQueryModel.splice(i,1);}else{i++;}}}this.queryChnModel.splice(C,1);c.getView().byId("addrsCommnChangeLayout").getContent()[C].destroy();this.oCurrentDelDataModel.BP_AddressesRel.results[s]["DELETED"]="X";var p="/BP_RootCollection(BP_GUID="+this.oController.sItemPath+")?$expand=";var q=p+"BP_AddressesRel,BP_AddressesRel/BP_CommPhoneRel,BP_AddressesRel/BP_CommMobileRel,BP_AddressesRel/BP_CommFaxRel,BP_AddressesRel/BP_CommEMailRel,";if(this.oController.sCategory==="1"){q=q+"BP_AddressesRel/BP_AddressVersionsPersRel/BP_AddressPersonVersionRel";}else{q=q+"BP_AddressesRel/BP_AddressVersionsOrgRel";}var r=fcg.mdg.editbp.util.DataAccess.readData(q,c);var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var e=w.bpHookReadAddressData(this,q,r);if(e!==undefined){r=e;}this.oCurrentDelDataModel.BP_AddressesRel.results[s]=r.BP_AddressesRel.results[s];d.body=this.oCurrentDelDataModel.BP_AddressesRel.results[s];}else{this.oCurrentDelDataModel.BP_AddressesRel.results[s]["DELETED"]="X";}}else{this.oCurrentDelDataModel.BP_AddressesRel.results[s]["DELETED"]="X";}this.oDeleteModel.push(d);var l=d.body;this.addressdelModel=l;for(i=0;i<this.oDeleteModel.length;i++){for(j=0;j<this.oController.oDetailComm.BP_AddressesRel.results.length;j++){if(this.oDeleteModel[i].body.AD_ID===this.oController.oDetailComm.BP_AddressesRel.results[j].AD_ID){this.oController.oDetailComm.BP_AddressesRel.results.splice(j,1);break;}}}},onCreate:function(){var c=(JSON.parse(JSON.stringify(this.oController.createdArray)));var u;var q={};var i,j;for(i=0;i<c.length;){u="{";q.index=this.oCreateModel.length+1;q.entity=c[i].entity;if(c[i].currentEntityKey!==undefined){q.currentEntityKey=c[i].currentEntityKey;}if(c[i].key!==undefined){u=u+"\""+c[i].field+"\":\""+c[i].key+"\",";u=u+"\""+c[i].field+"__TXT"+"\":\""+c[i].value+"\",";}else{u=u+"\""+c[i].field+"\":\""+c[i].value+"\",";}for(j=i+1;j<c.length;){if(c[i].entity===c[j].entity&&c[i].currentEntityKey===c[j].currentEntityKey){if(c[j].key!==undefined){u=u+"\""+c[j].field+"\":\""+c[j].key+"\",";u=u+"\""+c[j].field+"__TXT"+"\":\""+c[j].value+"\",";}else{u=u+"\""+c[j].field+"\":\""+c[j].value+"\",";}c.splice(j,1);}else{j++;}}c.splice(i,1);u=u.substring(0,u.length-1)+"}";q.body=JSON.parse(u);this.finalQueryModel.push(q);q={};}if(this.oController.reEdit!=="X"){var a={};for(i=0;i<this.finalQueryModel.length;i++){if(this.finalQueryModel[i].entity==="BP_Address"){a=this.finalQueryModel[i].body;this.finalQueryModel.splice(i,1);break;}}if(this.oController.sCategory==="1"){this.handlePersonIAV();}a=this.addressModelHandling(a,this.oController.vCurrentActionId);this.createAddressDescrText(a);var C={};if(this.oController.createdArray.length!==0){C.index=this.oCreateModel.length+1;C.body=a;C.entity="BP_Addresses";this.oCreateModel.push(C);this.addresscrtModel=a;this.aRemoveFields=[];}}if(this.oController.reEdit==="X"){a=this.oCreateModel[this.vReEditIndex].body;this.createAddressDescrText(a);this.oReEditCrtModel=this.addressModelHandling(a,this.oController.vCurrentActionId);this.aRemoveFields=[];}var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();w.bpHookOnCreateOfAddress(this,w);},handlePersonIAV:function(){var i;},addressModelHandling:function(a,A){var i,j,k,q;if(a!==undefined){for(i=0;i<this.finalQueryModel.length;i++){if(this.finalQueryModel[i].entity==="BP_Address"){for(k=0;k<Object.keys(this.finalQueryModel[i].body).length;k++){a[Object.keys(this.finalQueryModel[i].body)[k]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[k]];if(A==="changeRB")a.ChangeData[Object.keys(this.finalQueryModel[i].body)[k]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[k]];}this.finalQueryModel.splice(i,1);i=i-1;}else if(a.hasOwnProperty(this.finalQueryModel[i].entity+"Rel")||(this.finalQueryModel[i].entity==="BP_AddressPersonVersion")){var s;if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){if(a.BP_AddressVersionsPersRel.results[this.finalQueryModel[i].currentEntityKey].BP_AddressPersonVersionRel===undefined){a.BP_AddressVersionsPersRel.results[this.finalQueryModel[i].currentEntityKey].BP_AddressPersonVersionRel={};}s=a.BP_AddressVersionsPersRel.results[this.finalQueryModel[i].currentEntityKey].BP_AddressPersonVersionRel;}else{s=a[this.finalQueryModel[i].entity+"Rel"].results;}var l="";if(s.length===0){l=0;}else{if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){l=a.BP_AddressVersionsPersRel.results.length-1;if(Object.keys(s).length===0){l=-1;}}else{l=s.length-1;}}if(this.finalQueryModel[i].currentEntityKey>l){var c={};if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){s=this.finalQueryModel[i].body;}else{s.push(this.finalQueryModel[i].body);}if(A==="changeRB"||this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){var L={};if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){L=s;}else{L=s[s.length-1];}for(q=0;q<Object.keys(L).length;q++){c[Object.keys(this.finalQueryModel[i].body)[q]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[q]];}L.ChangeData=c;if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){if(l===-1){delete L.ChangeData;}a.BP_AddressVersionsPersRel.results[this.finalQueryModel[i].currentEntityKey].BP_AddressPersonVersionRel=L;}}this.finalQueryModel.splice(i,1);i=i-1;}else{var b=this.finalQueryModel[i].currentEntityKey;if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){for(k=0;k<Object.keys(s).length;k++){if(Object.keys(s)[k]==="TITLE_P__TXT"&&s[Object.keys(s)[k]]==="None"){s[Object.keys(s)[k]]="";}else{s[Object.keys(this.finalQueryModel[i].body)[k]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[k]];}if(A==="changeRB")s.ChangeData[Object.keys(this.finalQueryModel[i].body)[k]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[k]];}this.finalQueryModel.splice(i,1);i=i-1;}else if(s[b]===undefined){if(this.finalQueryModel[i].entity==="BP_AddressPersonVersion"){delete a.BP_AddressVersionsPersRel.results[this.finalQueryModel[i].currentEntityKey].BP_AddressPersonVersionRel;}else{delete a[this.finalQueryModel[i].entity+"Rel"];}this.createCommModel(a,this.finalQueryModel[i].entity+"Rel",A);this.finalQueryModel.splice(i,1);i=i-1;}else{for(k=0;k<Object.keys(s[b]).length;k++){if(Object.keys(s[b])[k]==="TITLE__TXT"||Object.keys(s[b])[k]==="TITLE_P__TXT"&&s[b][Object.keys(s[b])[k]]==="None"){s[b][Object.keys(s[b])[k]]="";}else{s[b][Object.keys(this.finalQueryModel[i].body)[k]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[k]];}if(A==="changeRB")s[b].ChangeData[Object.keys(this.finalQueryModel[i].body)[k]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[k]];}this.finalQueryModel.splice(i,1);i=i-1;}}}else if(!a.hasOwnProperty(this.finalQueryModel[i].entity+"Rel")&&this.finalQueryModel[i].entity+"Rel"!=="BP_Address"){this.createCommModel(a,this.finalQueryModel[i].entity+"Rel",A);this.finalQueryModel.splice(i,1);i=i-1;}}if(this.aRemoveFields.length!==0){for(j=0;j<this.aRemoveFields.length;j++){var d=this.aRemoveFields[j].split("-")[1];if(this.aRemoveFields[j].split("-")[0]==="BP_CommPhoneRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_CommPhoneRel.results[d]=[];}else if(this.aRemoveFields[j].split("-")[0]==="BP_CommMobileRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_CommMobileRel.results[d]=[];}else if(this.aRemoveFields[j].split("-")[0]==="BP_CommFaxRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_CommFaxRel.results[d]=[];}else if(this.aRemoveFields[j].split("-")[0]==="BP_CommEMailRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_CommEMailRel.results[d]=[];}else if(this.aRemoveFields[j].split("-")[0]==="BP_CommURIRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_CommURIRel.results[d]=[];}else if(this.aRemoveFields[j].split("-")[0]==="BP_AddressVersionsOrgRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_AddressVersionsOrgRel.results[d]=[];}else if(this.aRemoveFields[j].split("-")[0]==="BP_AddressVersionsPersRel"&&this.aRemoveFields[j].split("-")[2]===A){a.BP_AddressVersionsPersRel.results[d]=[];}}}var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var e=w.bpHookAddressModelHandling(this,a,A);if(e!==undefined){a=e;}return a;}},createAddressDescrText:function(a){var b="0000000000";var h="";var s="";var c="";var r="";var p="";this.vAD_ID+=1;var n=this.vAD_ID+"";var A=n.length;for(var i=0;i<6-A;++i){n="0"+n;}b="TEMP"+n;a["AD_ID"]=b.slice(-10);if(a.HOUSE_NO!==undefined){h=a.HOUSE_NO+" ";}if(a.STREET!==undefined){s=a.STREET+" ";}if(a.CITY!==undefined){c=a.CITY+" ";}if(a.REGION!==undefined){r=a.REGION+" ";}if(a.POSTL_COD1!==undefined){p=a.POSTL_COD1;}if(a.COUNTRY==="US"){if(a.HOUSE_NO===undefined&&a.STREET===undefined){a["AD_ID__TXT"]=p+c;}else if(a.CITY===undefined&&a.POSTL_COD1===undefined){a["AD_ID__TXT"]=s+h;}else if(a.HOUSE_NO===undefined&&a.STREET===undefined&&a.CITY===undefined&&a.POSTL_COD1===undefined){a["AD_ID__TXT"]="";}else{a["AD_ID__TXT"]=s+h+"/ "+p+c;}}else{if(a.HOUSE_NO===undefined&&a.STREET===undefined){a["AD_ID__TXT"]=c+r+p;}else if(a.REGION===undefined&&a.POSTL_COD1===undefined){a["AD_ID__TXT"]=h+s;}else if(a.HOUSE_NO===undefined&&a.STREET===undefined&&a.REGION===undefined&&a.POSTL_COD1===undefined){a["AD_ID__TXT"]="";}else{a["AD_ID__TXT"]=h+s+"/ "+c+r+p;}}var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var e=w.bpHookCreateAddressDescrText(this,a);if(e!==undefined){a["AD_ID__TXT"]=e["AD_ID__TXT"];}},createCommModel:function(a,e,A){var r={};var b=[];var i,q;for(i=0;i<this.finalQueryModel.length;i++){if(this.finalQueryModel[i].entity+"Rel"===e){b.push(this.finalQueryModel[i].body);if(A==="changeRB"){var c={};for(q=0;q<Object.keys(this.finalQueryModel[i].body).length;q++){c[Object.keys(this.finalQueryModel[i].body)[q]]=this.finalQueryModel[i].body[Object.keys(this.finalQueryModel[i].body)[q]];}b[b.length-1].ChangeData=c;}break;}}r.results=b;if(e==="BP_AddressPersonVersion"){a.BP_AddressVersionsPersRel.results[this.finalQueryModel[i].currentEntityKey].BP_AddressPersonVersionRel=b;}else{a[e]=r;}},getAddressData:function(c){this.oController=c;if(this.oController.oDetailComm===""){this.getAddressCommIAVData(c);var p="/BP_RootCollection(BP_GUID="+this.oController.sItemPath+")?$expand=";var a=p+"BP_AddressesRel,BP_AddressUsagesRel";this.oController.oDetailComm=fcg.mdg.editbp.util.DataAccess.readData(a,c);var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var e=w.bpHookReadAddressData(this,a,this.oController.oDetailComm);if(e!==undefined){this.oController.oDetailComm=e;}}if(fcg.mdg.editbp.util.DataAccess.checkCurrentModel()){fcg.mdg.editbp.util.DataAccess.getCurrentModel().BP_AddressesRel=this.oController.oDetailComm.BP_AddressesRel;}else{fcg.mdg.editbp.util.DataAccess.setCurrentModel(this.oController.oDetailComm);}this.setActionLayout(this.oController.oDetailComm);},getAddressCommIAVData:function(c){var t=this;var b;this.oController=c;this.oController.isAddressVisited="X";var p="/BP_RootCollection(BP_GUID="+this.oController.sItemPath+")?$expand=";var q=p+"BP_AddressUsagesRel,BP_AddressesRel,BP_AddressesRel/BP_CommPhoneRel,BP_AddressesRel/BP_CommMobileRel,BP_AddressesRel/BP_CommFaxRel,BP_AddressesRel/BP_CommEMailRel,BP_AddressesRel/BP_CommURIRel";if(this.oController.sCategory==="1"){q=q+",BP_AddressesRel/BP_AddressVersionsPersRel/BP_AddressPersonVersionRel";}else{q=q+",BP_AddressesRel/BP_AddressVersionsOrgRel";}b=true;var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var e=w.bpHookReadCommunicationData(this,q);if(e!==undefined){q=e;}this.oDataModel=new sap.ui.model.odata.ODataModel(c.getView().getModel().sServiceUrl,true);this.oDataModel.read(q,null,null,b,function(r){t.oController.oDetailComm=r;for(var i=0;i<t.oController.oDetailComm.BP_AddressesRel.results.length;i++){t.aDelAddressId.push(t.oController.oDetailComm.BP_AddressesRel.results[i].AD_ID);}var n={};for(i=0;i<r.BP_AddressUsagesRel.results.length;i++){if(r.BP_AddressUsagesRel.results[i].ADDRESSTYPE==="XXDEFAULT"){t.vStdAddress=r.BP_AddressUsagesRel.results[i].AD_ID;break;}}for(i=0;i<r.BP_AddressesRel.results.length;i++){if(r.BP_AddressesRel.results[i].BP_CommPhoneRel.results!==undefined){n.numPhn=r.BP_AddressesRel.results[i].BP_CommPhoneRel.results.length;}else{n.numPhn=0;}if(r.BP_AddressesRel.results[i].BP_CommMobileRel.results!==undefined){n.numMob=r.BP_AddressesRel.results[i].BP_CommMobileRel.results.length;}else{n.numMob=0;}if(r.BP_AddressesRel.results[i].BP_CommFaxRel.results!==undefined){n.numFax=r.BP_AddressesRel.results[i].BP_CommFaxRel.results.length;}else{n.numFax=0;}if(r.BP_AddressesRel.results[i].BP_CommEMailRel.results!==undefined){n.numEmail=r.BP_AddressesRel.results[i].BP_CommEMailRel.results.length;}else{n.numEmail=0;}if(r.BP_AddressesRel.results[i].BP_CommURIRel.results!==undefined){n.numURI=r.BP_AddressesRel.results[i].BP_CommURIRel.results.length;}else{n.numURI=0;}if(t.oController.sCategory==="1"){if(r.BP_AddressesRel.results[i].BP_AddressVersionsPersRel.results!==undefined){n.numIAV=r.BP_AddressesRel.results[i].BP_AddressVersionsPersRel.results.length;}else{n.numIAV=0;}}else{if(r.BP_AddressesRel.results[i].BP_AddressVersionsOrgRel.results!==undefined){n.numIAV=r.BP_AddressesRel.results[i].BP_AddressVersionsOrgRel.results.length;}else{n.numIAV=0;}}t.oCountDeepEntities.push(n);n={};}fcg.mdg.editbp.util.DataAccess.setCurrentModel(t.oController.oDetailComm);});},getCPBasicData:function(c){this.oController=c;if((fcg.mdg.editbp.handlers.ContactPerson.oRelResults.BP_RelationsRel===undefined||fcg.mdg.editbp.handlers.ContactPerson.oRelResults.BP_RelationsRel.results!==undefined||fcg.mdg.editbp.handlers.ContactPerson.oRelResults.BP_RelationsRel.results.length>0)&&this.oController.oCPBasicData===undefined){var p="/BP_RootCollection(BP_GUID="+this.oController.sItemPath+")?$expand=";var C=p+"BP_RelationsRel/BP_RelationContactPersonRel/BP_ContactPersonWorkplacesRel";fcg.mdg.editbp.util.DataAccess.readDataAsynchronous(C,c,function(r){this.oCPBasicData=r;}.bind(this));}},setActionLayout:function(r){this.oController.getView().byId("entityStep").setNextStep(this.oController.getView().byId("actionStep"));if(this.oController.oActionLayout===""){this.oController.oActionLayout=sap.ui.xmlfragment('fcg.mdg.editbp.frag.generic.SelectAction',this.oController);}this.oController.getView().byId("actionLayout").setVisible(true);this.oController.getView().byId("actionLayout").addContent(this.oController.oActionLayout);this.oController.setRadioButtonText();sap.ui.getCore().byId("changeRB").setVisible(true);if(r.BP_AddressesRel.results.length===0){sap.ui.getCore().byId("changeRB").setEnabled(false);sap.ui.getCore().byId("actionRBG").setSelectedIndex(-1);sap.ui.getCore().byId("deleteRB").setEnabled(false);}else{sap.ui.getCore().byId("changeRB").setEnabled(true);sap.ui.getCore().byId("actionRBG").setSelectedIndex(1);sap.ui.getCore().byId("deleteRB").setEnabled(true);}},getAddressDetailsPage:function(r,i){this.getCommData(r,i);this.oController.getView().byId("selectEntityInstanceStep").setNextStep(this.oController.getView().byId("communicationStep"));this.loadCommlayout(this.oController,r.BP_AddressesRel.results[i]);var m=new sap.ui.model.json.JSONModel();this.oCurrentDataModel=r;m.setData(r.BP_AddressesRel.results[i]);this.oAddressCreate.setModel(m);this.currentModel=m;this.createCommIAVFields(this.currentModel.getData());},getCommData:function(r,i){var a="";if(sap.ui.getCore().byId("selectDataListRBG")===undefined){a=0;}else{a=sap.ui.getCore().byId("selectDataListRBG").getSelectedIndex();}this.selectedIndex=a;var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();w.bpHookSetDeepEntityCount(this,r,i);},editCommunication:function(c){if(c.BP_AddressesRel.results.length>1){this.setSelectEntityLayout(c);return;}var m=new sap.ui.model.json.JSONModel();this.oCurrentDataModel=c;if(c.BP_AddressesRel.results.length!==0){if(c.BP_AddressesRel.results.length===1){this.getCommData(c,0);this.selectedIndex=0;if(this.oController.vCurrentActionId==="changeRB"){this.oController.getView().byId("actionStep").setNextStep(this.oController.getView().byId("communicationStep"));this.loadCommlayout(this.oController,c.BP_AddressesRel.results[0]);m.setData(c.BP_AddressesRel.results[0]);this.oAddressCreate.setModel(m);this.currentModel=m;this.createCommIAVFields(this.currentModel.getData());}else{this.setSelectEntityLayout(c);}}}},setSelectEntityLayout:function(r){var m=new sap.ui.model.json.JSONModel();var s={dataitems:[]};var i;var d;var a,b,A,i;if(this.oController.vCurrentActionId==="deleteRB"){this.oController.getView().byId("actionStep").setNextStep(this.oController.getView().byId("editStep"));if(r.BP_AddressesRel.results.length>1){for(i=0;i<r.BP_AddressUsagesRel.results.length;i++){if(r.BP_AddressUsagesRel.results[i].ADDRESSTYPE==="XXDEFAULT"){a=r.BP_AddressUsagesRel.results[i].AD_ID;break;}}}this.oCurrentDelDataModel=r;}else{this.oController.getView().byId("actionStep").setNextStep(this.oController.getView().byId("selectEntityInstanceStep"));}if(this.oController.oCommunicationListRBG===""){this.oController.oCommunicationListRBG=sap.ui.xmlfragment('fcg.mdg.editbp.frag.generic.SelectEntityInstance',this.oController);}if(this.oController.vCurrentActionId==="deleteRB"){this.oController.getView().byId("editLayout").setVisible(true);if(this.oController.getView().byId("editLayout").getContent().length>0){this.oController.getView().byId("editLayout").removeAllContent();}this.oController.getView().byId("editLayout").addContent(this.oController.oCommunicationListRBG);}else{this.oController.getView().byId("selectEntityInstanceLayout").setVisible(true);this.oController.getView().byId("selectEntityInstanceLayout").addContent(this.oController.oCommunicationListRBG);}var c=[];if(this.oController.vCurrentActionId==="deleteRB"){c=this.getAddressesUsedByCP();}for(i=0;i<r.BP_AddressesRel.results.length;i++){A=r.BP_AddressesRel.results[i];if(this.oController.vCurrentActionId==="deleteRB"){if(c.indexOf(r.BP_AddressesRel.results[i].AD_ID)!==-1){b=false;}else{if(r.BP_AddressesRel.results.length===1){b=true;}else{if(a===r.BP_AddressesRel.results[i].AD_ID){b=false;}else{b=true;}}}d={"RBText":fcg.mdg.editbp.util.Formatter.createRecordsToProcessForAddress(A),"AD_ID":r.BP_AddressesRel.results[i].AD_ID,"enableFlag":b};}else{d={"RBText":fcg.mdg.editbp.util.Formatter.createRecordsToProcessForAddress(A)};}s.dataitems.push(d);}var e=this.oController.bpHookSetSelectRecordLayout(this,r,s);if(e!==undefined){s=e;}var f=sap.ui.getCore().byId("selectDataListRBG");if(this.oController.vCurrentActionId==="deleteRB"){sap.ui.getCore().byId("idInvTextEntityRBG").setText(this.oController.i18nBundle.getText("selet_comm_del"));}else{sap.ui.getCore().byId("idInvTextEntityRBG").setText(this.oController.i18nBundle.getText("selet_comm"));}m.setData(s);f.setModel(m);f.setSelectedIndex(-1);},getAddressesUsedByCP:function(){var a=[];if(fcg.mdg.editbp.handlers.ContactPerson.oRelResults.BP_RelationsRel!==undefined&&fcg.mdg.editbp.handlers.ContactPerson.oRelResults.BP_RelationsRel.results!==undefined){var c=fcg.mdg.editbp.handlers.ContactPersonChange.cpQueryModel;var C=[];for(var p=0;p<c.length;++p){var b=c[p].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results;C.push(c[p].BP_RelationContactPersonRel.PARTNER2);for(var j=0;j<b.length;++j){if(b[j].action!=="D"){var i=a.indexOf(b[j].ADDRESS_NUMBER);if(i===-1){a.push(b[j].ADDRESS_NUMBER);continue;}}}}var l=fcg.mdg.editbp.handlers.ContactPerson.oRelResults.BP_RelationsRel.results;for(var p=0;p<l.length;++p){var b=l[p].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results;if(C.indexOf(l[p].BP_RelationContactPersonRel.PARTNER2)!==-1){continue;}for(var j=0;j<b.length;++j){var i=a.indexOf(b[j].ADDRESS_NUMBER);if(i===-1){a.push(b[j].ADDRESS_NUMBER);continue;}}}var d=fcg.mdg.editbp.handlers.ContactPerson.aCPQueryModel;for(var p=0;p<d.length;++p){var b=d[p].body.BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel;for(var j=0;j<b.length;++j){var i=a.indexOf(b[j].ADDRESS_NUMBER);if(i===-1){a.push(b[j].ADDRESS_NUMBER);continue;}}}}else{var l=this.oCPBasicData.BP_RelationsRel.results;for(var p=0;p<l.length;++p){var b=l[p].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results;for(var j=0;j<b.length;++j){var i=a.indexOf(b[j].ADDRESS_NUMBER);if(i===-1){a.push(b[j].ADDRESS_NUMBER);continue;}}}}return a;},createCommIAVFields:function(c){this.vIdCounterTel=0;this.vIdCounterMob=0;this.vIdCounterFax=0;this.vIdCounterEmail=0;this.vIdCounterURI=0;this.oIavFormId=0;if(this.oController.reEdit!=="X"&&this.oController.vCurrentActionId!=="changeRB"){var C=sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue();if(sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").getValue()===""){sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").setValue(C);}if(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getValue()===""){sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").setValue(C);}if(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getValue()===""){sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").setValue(C);}}if(c.BP_CommPhoneRel!==undefined){if(c.BP_CommPhoneRel.results!==undefined){if(c.BP_CommPhoneRel.results.length!==0){var p=new sap.ui.model.json.JSONModel();p.setData(c.BP_CommPhoneRel.results[0]);this.oAddressContactCreate.setModel(p,"tel");this.setEditCommModel(c.BP_CommPhoneRel.results,"tel");fcg.mdg.editbp.handlers.Communication.handleEnableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);}}else{c.BP_CommPhoneRel.results=[];fcg.mdg.editbp.handlers.Communication.handleDisableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);}}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);}if(c.BP_CommMobileRel!==undefined){if(c.BP_CommMobileRel.results!==undefined){if(c.BP_CommMobileRel.results.length!==0){var m=new sap.ui.model.json.JSONModel();m.setData(c.BP_CommMobileRel.results[0]);this.oAddressContactCreate.setModel(m,"mob");this.setEditCommModel(c.BP_CommMobileRel.results,"mob");fcg.mdg.editbp.handlers.Communication.handleEnableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);}}else{c.BP_CommMobileRel.results=[];fcg.mdg.editbp.handlers.Communication.handleDisableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);}}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);}if(c.BP_CommFaxRel!==undefined){if(c.BP_CommFaxRel.results!==undefined){if(c.BP_CommFaxRel.results.length!==0){var f=new sap.ui.model.json.JSONModel();f.setData(c.BP_CommFaxRel.results[0]);this.oAddressContactCreate.setModel(f,"fax");this.setEditCommModel(c.BP_CommFaxRel.results,"fax");fcg.mdg.editbp.handlers.Communication.handleEnableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);}}else{c.BP_CommFaxRel.results=[];fcg.mdg.editbp.handlers.Communication.handleDisableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);}}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);}if(c.BP_CommEMailRel!==undefined){if(c.BP_CommEMailRel.results!==undefined){if(c.BP_CommEMailRel.results.length!==0){var e=new sap.ui.model.json.JSONModel();e.setData(c.BP_CommEMailRel.results[0]);this.oAddressContactCreate.setModel(e,"email");this.setEditCommModel(c.BP_CommEMailRel.results,"email");fcg.mdg.editbp.handlers.Communication.handleEnableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);}}else{c.BP_CommEMailRel.results=[];fcg.mdg.editbp.handlers.Communication.handleDisableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);}}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);}if(c.BP_CommURIRel!==undefined){if(c.BP_CommURIRel.results!==undefined){if(c.BP_CommURIRel.results.length!==0){var u=new sap.ui.model.json.JSONModel();u.setData(c.BP_CommURIRel.results[0]);this.oAddressContactCreate.setModel(u,"uri");this.setEditCommModel(c.BP_CommURIRel.results,"uri");fcg.mdg.editbp.handlers.Communication.handleEnableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);}}else{c.BP_CommURIRel.results=[];fcg.mdg.editbp.handlers.Communication.handleDisableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);}}else{fcg.mdg.editbp.handlers.Communication.handleDisableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);}if(c.BP_AddressVersionsOrgRel!==undefined)if(c.BP_AddressVersionsOrgRel.results!==undefined){if(c.BP_AddressVersionsOrgRel.results.length!==0){this.setEditCommModel(c.BP_AddressVersionsOrgRel.results,"iav");}}else{c.BP_AddressVersionsOrgRel.results=[];}if(c.BP_AddressVersionsPersRel!==undefined)if(c.BP_AddressVersionsPersRel.results!==undefined){if(c.BP_AddressVersionsPersRel.results.length!==0){this.setEditCommModel(c.BP_AddressVersionsPersRel.results,"iav");}}else{c.BP_AddressVersionsPersRel.results=[];}},setCurrentModel:function(m){this.oCurrentDataModel=m;},getCurrentModel:function(){return this.oCurrentDataModel;},addNewTel:function(){var w=fcg.mdg.editbp.handlers.Communication.oController;var e=[];var f="";var F=sap.ui.getCore().byId("SFAddressContactEdit--Form");var a=F.getFormContainers()[0];f=a.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getParent());var g=fcg.mdg.editbp.handlers.Communication.vIdCounterTel+1;fcg.mdg.editbp.handlers.Communication.vIdCounterTel=g;var t=new sap.m.Input({id:"INP-BP_CommPhone-COUNTRY-"+g,value:"{/COUNTRY}",maxLength:3,placeholder:w.i18nBundle.getText("PLACEHOLDER_COUNTRY_KEY"),valueHelpRequest:fcg.mdg.editbp.handlers.Communication.onCommCountryVH,change:fcg.mdg.editbp.handlers.Communication.onCommCountryKeyChange,showValueHelp:true,layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2",indent:"L3 M3 S3",linebreak:true})});var b=new sap.m.Input({id:"INP-BP_CommPhone-TELEPHONE-"+g,value:"{path:'/TELEPHONE',formatter:'fcg.mdg.editbp.util.Formatter.formatCommNumber'}",maxLength:30,type:"Number",placeholder:w.i18nBundle.getText("PLACEHOLDER_TN"),change:fcg.mdg.editbp.handlers.Communication.onTelChange,layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2"})});var c=new sap.m.Input({id:"INP-BP_CommPhone-EXTENSION-"+g,value:"{path:'/EXTENSION',formatter:'fcg.mdg.editbp.util.Formatter.formatCommNumber'}",maxLength:10,type:"Number",placeholder:w.i18nBundle.getText("PLACEHOLDER_EXTENSION"),change:fcg.mdg.editbp.handlers.Communication.onTelChange,layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});var h=new sap.m.HBox({layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});h.addStyleClass("sapUiSmallMargin");var d=new sap.ui.core.Icon({src:"sap-icon://sys-add",decorative:false,press:fcg.mdg.editbp.handlers.Communication.addNewTel,tooltip:"Add"});d.addStyleClass("sapUiSmallMarginEnd");h.addItem(d);var i=new sap.ui.core.Icon({src:"sap-icon://sys-cancel",decorative:false,press:fcg.mdg.editbp.handlers.Communication.removeFormElementTel,tooltip:"Cancel"});h.addItem(i);var W=fcg.mdg.editbp.handlers.Communication.getWizardInstance();W.bpHookAddNewTelAddress(this,W,h);e.push(t,b,c,h);var n=new sap.ui.layout.form.FormElement({fields:e});a.insertFormElement(n,f);fcg.mdg.editbp.handlers.Communication.vNewTelField=n;if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue()!==""){t.setValue(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue());}},addNewFax:function(){var w=fcg.mdg.editbp.handlers.Communication.oController;var e=[];var f="";var F=sap.ui.getCore().byId("SFAddressContactEdit--Form");var a=F.getFormContainers()[0];f=a.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommEMail-E_MAIL-0").getParent());var g=fcg.mdg.editbp.handlers.Communication.vIdCounterFax+1;fcg.mdg.editbp.handlers.Communication.vIdCounterFax=g;var b=new sap.m.Input({id:"INP-BP_CommFax-COUNTRY-"+g,value:"{/COUNTRY}",maxLength:3,placeholder:w.i18nBundle.getText("PLACEHOLDER_COUNTRY_KEY"),showValueHelp:true,valueHelpRequest:fcg.mdg.editbp.handlers.Communication.onCommCountryVH,change:fcg.mdg.editbp.handlers.Communication.onCommCountryKeyChange,layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2",indent:"L3 M3 S3",linebreak:true})});var c=new sap.m.Input({id:"INP-BP_CommFax-TELEPHONE-"+g,value:"{path:'/FAX',formatter:'fcg.mdg.editbp.util.Formatter.formatCommNumber'}",maxLength:30,type:"Number",placeholder:w.i18nBundle.getText("PLACEHOLDER_FAX_NO"),change:fcg.mdg.editbp.handlers.Communication.onFaxChange,layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2"})});var d=new sap.m.Input({id:"INP-BP_CommFax-EXTENSION-"+g,value:"{path:'/EXTENSION',formatter:'fcg.mdg.editbp.util.Formatter.formatCommNumber'}",maxLength:10,type:"Number",placeholder:w.i18nBundle.getText("PLACEHOLDER_EXTENSION"),change:fcg.mdg.editbp.handlers.Communication.onFaxChange,layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});var h=new sap.m.HBox({layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});h.addStyleClass("sapUiSmallMargin");var i=new sap.ui.core.Icon({src:"sap-icon://sys-add",decorative:false,press:fcg.mdg.editbp.handlers.Communication.addNewFax,tooltip:"Add"});i.addStyleClass("sapUiSmallMarginEnd");h.addItem(i);var j=new sap.ui.core.Icon({src:"sap-icon://sys-cancel",decorative:false,press:fcg.mdg.editbp.handlers.Communication.removeFormElementFax,tooltip:"Cancel"});h.addItem(j);var W=fcg.mdg.editbp.handlers.Communication.getWizardInstance();W.bpHookAddNewFaxAddress(this,W,h);e.push(b,c,d,h);var n=new sap.ui.layout.form.FormElement({fields:e});a.insertFormElement(n,f);fcg.mdg.editbp.handlers.Communication.vNewFaxField=n;if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue()!==""){b.setValue(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue());}},addNewMob:function(){var w=fcg.mdg.editbp.handlers.Communication.oController;var e=[];var f="";var F=sap.ui.getCore().byId("SFAddressContactEdit--Form");var a=F.getFormContainers()[0];f=a.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getParent());var g=fcg.mdg.editbp.handlers.Communication.vIdCounterMob+1;fcg.mdg.editbp.handlers.Communication.vIdCounterMob=g;var m=new sap.m.Input({id:"INP-BP_CommMobile-COUNTRY-"+g,value:"{/COUNTRY}",maxLength:3,placeholder:w.i18nBundle.getText("PLACEHOLDER_COUNTRY_KEY"),change:fcg.mdg.editbp.handlers.Communication.onCommCountryKeyChange,valueHelpRequest:fcg.mdg.editbp.handlers.Communication.onCommCountryVH,showValueHelp:true,layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2",indent:"L3 M3 S3",linebreak:true})});var b=new sap.m.Input({id:"INP-BP_CommMobile-TELEPHONE-"+g,value:"{path:'/TELEPHONE',formatter:'fcg.mdg.editbp.util.Formatter.formatCommNumber'}",maxLength:30,type:"Number",placeholder:w.i18nBundle.getText("PLACEHOLDER_MOBNO"),change:fcg.mdg.editbp.handlers.Communication.onMobChange,layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"})});var h=new sap.m.HBox({layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});h.addStyleClass("sapUiSmallMargin");var c=new sap.ui.core.Icon({src:"sap-icon://sys-add",decorative:false,press:fcg.mdg.editbp.handlers.Communication.addNewMob,tooltip:"Add"});c.addStyleClass("sapUiSmallMarginEnd");h.addItem(c);var d=new sap.ui.core.Icon({src:"sap-icon://sys-cancel",decorative:false,press:fcg.mdg.editbp.handlers.Communication.removeFormElementMob,tooltip:"Cancel"});h.addItem(d);var W=fcg.mdg.editbp.handlers.Communication.getWizardInstance();W.bpHookAddNewMobAddress(this,W,h);e.push(m,b,h);var n=new sap.ui.layout.form.FormElement({fields:e});a.insertFormElement(n,f);fcg.mdg.editbp.handlers.Communication.vNewMobField=n;if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue()!==""){m.setValue(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue());}},addNewEmail:function(){var e=[];var f="";var F=sap.ui.getCore().byId("SFAddressContactEdit--Form");var a=F.getFormContainers()[0];f=a.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommURI-URI-0").getParent());var g=fcg.mdg.editbp.handlers.Communication.vIdCounterEmail+1;fcg.mdg.editbp.handlers.Communication.vIdCounterEmail=g;var b=new sap.m.Input({id:"INP-BP_CommEMail-E_MAIL-"+g,value:"{/E_MAIL}",type:"Email",maxLength:241,change:fcg.mdg.editbp.handlers.Communication.onEmailChange,layoutData:new sap.ui.layout.GridData({span:"L5 M5 S5",indent:"L3 M3 S3",linebreak:true})});var h=new sap.m.HBox({layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});h.addStyleClass("sapUiSmallMargin");var c=new sap.ui.core.Icon({src:"sap-icon://sys-add",decorative:false,press:fcg.mdg.editbp.handlers.Communication.addNewEmail,tooltip:"Add"});c.addStyleClass("sapUiSmallMarginEnd");h.addItem(c);var d=new sap.ui.core.Icon({src:"sap-icon://sys-cancel",decorative:false,press:fcg.mdg.editbp.handlers.Communication.removeFormElementEmail,tooltip:"Cancel"});h.addItem(d);var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();w.bpHookAddNewEmailAddress(this,w,h);e.push(b,h);var n=new sap.ui.layout.form.FormElement({fields:e});a.insertFormElement(n,f);fcg.mdg.editbp.handlers.Communication.vNewEmailField=n;},addNewURI:function(){var e=[];var f="";var F=sap.ui.getCore().byId("SFAddressContactEdit--Form");var a=F.getFormContainers()[0];f=a.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommURI-URI-0").getParent());f=f+1;var g=fcg.mdg.editbp.handlers.Communication.vIdCounterURI+1;fcg.mdg.editbp.handlers.Communication.vIdCounterURI=g;var u=new sap.m.Input({id:"INP-BP_CommURI-URI-"+g,value:"{/URI}",type:"Url",maxLength:132,change:fcg.mdg.editbp.handlers.Communication.onChange_Create,layoutData:new sap.ui.layout.GridData({span:"L5 M5 S5",indent:"L3 M3 S3",linebreak:true})});var h=new sap.m.HBox({layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});h.addStyleClass("sapUiSmallMargin");var b=new sap.ui.core.Icon({src:"sap-icon://sys-add",decorative:false,press:fcg.mdg.editbp.handlers.Communication.addNewURI,tooltip:"Add"});b.addStyleClass("sapUiSmallMarginEnd");h.addItem(b);var c=new sap.ui.core.Icon({src:"sap-icon://sys-cancel",decorative:false,press:fcg.mdg.editbp.handlers.Communication.removeFormElementUri,tooltip:"Cancel"});h.addItem(c);var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();w.bpHookAddNewURIAddress(this,w,h);e.push(u,h);var n=new sap.ui.layout.form.FormElement({fields:e});a.insertFormElement(n,f);fcg.mdg.editbp.handlers.Communication.vNewURIField=n;},addNewIAVGrp:function(){fcg.mdg.editbp.handlers.Communication.oEditIAVModel="";fcg.mdg.editbp.handlers.Communication.addNewIAV();},addNewIAV:function(){var w=fcg.mdg.editbp.handlers.Communication.oController;var d=w.i18nBundle.getText("NONE");var I="INP-BP_AddressVersionsOrg";var a;var f=w.getView().byId("communicationLayout").getItems().length-1;var b=fcg.mdg.editbp.handlers.Communication.oIavFormId;if(w.sCategory==="1"){I="INP-BP_AddressVersionsPers";a="INP-BP_AddressPersonVersion";}fcg.mdg.editbp.handlers.Communication.oIavFormId=b+1;var n=new sap.ui.layout.form.SimpleForm({id:"SFAddressIAVOrgEdit-"+b,maxContainerCols:1,minWidth:1024,layout:"ResponsiveGridLayout",labelSpanL:3,labelSpanM:3,emptySpanL:4,emptySpanS:4,emptySpanM:4,labelSpanS:3,editable:true,"class":"paddingFixSF"});fcg.mdg.editbp.handlers.Communication.addIavToolBar(n,w);var c=new sap.m.Label({text:w.i18nBundle.getText("ADDRESSVERSION")});n.addContent(c);var e=new sap.m.Select({id:I+"-ADDR_VERS-"+b,change:fcg.mdg.editbp.handlers.Communication.onAddressChange,});var D=w.i18nBundle.getText("NONE");var t=new sap.ui.model.json.JSONModel();if(fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results===undefined){fcg.mdg.editbp.handlers.Communication.setIavArray(fcg.mdg.editbp.util.DataAccess.getValueHelpData()[6].data.results);}t.setData(fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion);var g=new sap.ui.core.Item({key:"{KEY}",text:"{TEXT}"});e.setModel(t);e.bindItems("/results",g);var h=new sap.ui.core.Item({key:"",text:D});e.addItem(h);if(fcg.mdg.editbp.handlers.Communication.oEditIAVModel!==""){e.setSelectedKey(fcg.mdg.editbp.handlers.Communication.oEditIAVModel.getData().ADDR_VERS);e.setEnabled(false);fcg.mdg.editbp.handlers.Communication.selectedAddVersion[b]=fcg.mdg.editbp.handlers.Communication.oEditIAVModel.getData().ADDR_VERS;}else{e.setSelectedKey("");fcg.mdg.editbp.handlers.Communication.selectedAddVersion[b]="";}n.addContent(e);var i=new sap.m.Label({text:w.i18nBundle.getText("TN1")});var j;if(w.sCategory==="1"){j=new sap.m.Select({id:a+"-TITLE_P-"+b,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}else{j=new sap.m.Select({id:I+"-TITLE-"+b,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}fcg.mdg.editbp.handlers.Communication.setvHelpTitle(w.sCategory,i,j);if(fcg.mdg.editbp.handlers.Communication.oEditIAVModel!==""){if(fcg.mdg.editbp.handlers.Communication.oEditIAVModel.getData().TITLE_KEY!==undefined)j.setSelectedKey(fcg.mdg.editbp.handlers.Communication.oEditIAVModel.getData().TITLE_KEY);else if(w.sCategory==="1"){j.setSelectedKey(fcg.mdg.editbp.handlers.Communication.oEditIAVModel.getData().BP_AddressPersonVersionRel.TITLE_P);}else{j.setSelectedKey(fcg.mdg.editbp.handlers.Communication.oEditIAVModel.getData().TITLE);}}else{j.setSelectedKey("");}n.addContent(i);n.addContent(j);var k;if(w.sCategory==="1"){k=new sap.m.Input({id:a+"-FIRSTNAME-"+b,value:"{/BP_AddressPersonVersionRel/FIRSTNAME}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}else{k=new sap.m.Input({id:I+"-NAME-"+b,value:"{/NAME}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}n.addContent(k);var l=new sap.m.Label({text:w.i18nBundle.getText("Name2")});if(w.sCategory==="1"){l.setText(w.i18nBundle.getText("LN"));}n.addContent(l);var m;if(w.sCategory==="1"){m=new sap.m.Input({id:a+"-LASTNAME-"+b,value:"{/BP_AddressPersonVersionRel/LASTNAME}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}else{m=new sap.m.Input({id:I+"-NAME2-"+b,value:"{/NAME_2}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}n.addContent(m);var o=new sap.m.Label({text:w.i18nBundle.getText("ST1")});n.addContent(o);var p;if(w.sCategory==="1"){p=new sap.m.Input({id:a+"-SORT1_P-"+b,value:"{/BP_AddressPersonVersionRel/SORT1_P}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}else{p=new sap.m.Input({id:I+"-SORT1-"+b,value:"{/SORT1}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}n.addContent(p);var q=new sap.m.Label({text:w.i18nBundle.getText("ST2")});n.addContent(q);var r;if(w.sCategory==="1"){r=new sap.m.Input({id:a+"-SORT2_P-"+b,value:"{/BP_AddressPersonVersionRel/SORT2_P}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}else{r=new sap.m.Input({id:I+"-SORT2-"+b,value:"{/SORT2}",maxLength:30,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});}n.addContent(r);var s=new sap.m.Label({text:w.i18nBundle.getText("STHN")});n.addContent(s);var u=new sap.m.Input({id:I+"-STREET-"+b,value:"{/STREET}",maxLength:60,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});n.addContent(u);var v=new sap.m.Input({id:I+"-HOUSE_NO-"+b,value:"{/HOUSE_NO}",maxLength:10,change:fcg.mdg.editbp.handlers.Communication.onChange_Create});n.addContent(v);var x=new sap.m.Label({text:w.i18nBundle.getText("CITY")});n.addContent(x);var y=new sap.m.Input({id:I+"-CITY-"+b,value:"{/CITY}",maxLength:30,type:"Email",change:fcg.mdg.editbp.handlers.Communication.onChange_Create});n.addContent(y);var W=fcg.mdg.editbp.handlers.Communication.getWizardInstance();W.bpHookAddNewIAVAddress(this,W,n);w.getView().byId("communicationLayout").insertItem(n,f);fcg.mdg.editbp.handlers.Communication.oIavNewForm=n;if(e.getSelectedKey()===""){var z=fcg.mdg.editbp.handlers.Communication.getIavFields(I,e.getId().split("-")[3]);fcg.mdg.editbp.handlers.Communication.setEnableForFields(z,false);}if(fcg.mdg.editbp.handlers.Communication.oEditIAVModel===""){fcg.mdg.editbp.handlers.Communication.handleDisableIcon("toolCommIAVAdd",fcg.mdg.editbp.handlers.Communication.addNewIAVGrp);}},removeFormElementTel:function(e){var f=e.getSource().getParent().getParent();var i=e.getSource().getId();var a=f.getFields()[1].getId().split("-")[1]+"Rel"+"-"+f.getFields()[1].getId().split("-")[3]+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;fcg.mdg.editbp.handlers.Communication.aRemoveFields.push(a);fcg.mdg.editbp.handlers.Communication.removeFormElement(f,i,fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("TEL"));},removeFormElementMob:function(e){var f=e.getSource().getParent().getParent();var i=e.getSource().getId();var a=f.getFields()[1].getId().split("-")[1]+"Rel"+"-"+f.getFields()[1].getId().split("-")[3]+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;fcg.mdg.editbp.handlers.Communication.aRemoveFields.push(a);fcg.mdg.editbp.handlers.Communication.removeFormElement(f,i,fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("MOB"));},removeFormElementFax:function(e){var f=e.getSource().getParent().getParent();var i=e.getSource().getId();var a=f.getFields()[1].getId().split("-")[1]+"Rel"+"-"+f.getFields()[1].getId().split("-")[3]+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;fcg.mdg.editbp.handlers.Communication.aRemoveFields.push(a);fcg.mdg.editbp.handlers.Communication.removeFormElement(f,i,fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("FAX"));},removeFormElementEmail:function(e){var f=e.getSource().getParent().getParent();var i=e.getSource().getId();var a=f.getFields()[0].getId().split("-")[1]+"Rel"+"-"+f.getFields()[0].getId().split("-")[3]+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;fcg.mdg.editbp.handlers.Communication.aRemoveFields.push(a);fcg.mdg.editbp.handlers.Communication.removeFormElement(f,i,fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("EMAIL"));},removeFormElementUri:function(e){var f=e.getSource().getParent().getParent();var i=e.getSource().getId();var a=f.getFields()[0].getId().split("-")[1]+"Rel"+"-"+f.getFields()[0].getId().split("-")[3]+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;fcg.mdg.editbp.handlers.Communication.aRemoveFields.push(a);fcg.mdg.editbp.handlers.Communication.removeFormElement(f,i,fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("WEB"));},removeFormElement:function(f,a,e){var F=sap.ui.getCore().byId("SFAddressContactEdit--Form");var b=F.getFormContainers()[0];var c="";var v="";var t=b.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").getParent());var m=b.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getParent());var d=b.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getParent());var g=b.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommEMail-E_MAIL-0").getParent());var u=b.getFormElements().indexOf(sap.ui.getCore().byId("INP-BP_CommURI-URI-0").getParent());var i;if(v){var h=b.getFormElements().indexOf(f);var n=b.getFormElements()[h+1];f.setVisible(false);var l=new sap.m.Label({text:e});n.setLabel(l);var L=n.getFields()[0].getLayoutData();L.setLinebreak(false);L.setIndent("L0 M0 S0");}fcg.mdg.editbp.handlers.Communication.getCommFieldCount(t,m,d,g,u,b);var j=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");if(j.getValueState()==="None"&&j.getValue()!==""){fcg.mdg.editbp.handlers.Communication.oController.oWizard.validateStep(fcg.mdg.editbp.handlers.Communication.oController.getView().byId("communicationStep"));}var k={};var o=fcg.mdg.editbp.util.DataAccess.getCurrentModel();var p=0;var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();switch(f.getFields()[1].getId().split("-")[1]){case'BP_CommPhone':if(w.vCurrentActionId==="changeRB"){p=this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numPhn;}if(f.getFields()[1].getId().split("-")[3]<p){k.action="D";this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numPhn--;}break;case'BP_CommMobile':if(w.vCurrentActionId==="changeRB"){p=p=this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numMob;}if(f.getFields()[1].getId().split("-")[3]<p){k.action="D";this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numMob--;}break;case'BP_CommFax':if(w.vCurrentActionId==="changeRB"){p=p=this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numFax;}if(f.getFields()[1].getId().split("-")[3]<p){k.action="D";this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numFax--;}break;case'BP_CommURI':if(w.vCurrentActionId==="changeRB"){p=p=this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numURI;}if(f.getFields()[1].getId().split("-")[3]<p){k.action="D";this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numURI--;}break;case'BP_CommEMail':if(w.vCurrentActionId==="changeRB"){p=p=this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numEmail;}if(f.getFields()[0].getId().split("-")[3]<p){k.action="D";this.oCountDeepEntities[parseInt(this.selectedIndex,10)].numEmail--;}break;default:}if(k.action!=="D"){for(i=0;i<w.changedArray.length;i++){if(w.changedArray[i].action==="N"&&w.changedArray[i].entity===f.getFields()[1].getId().split("-")[1]&&w.changedArray[i].createdIndex===f.getFields()[1].getId().split("-")[3]){w.changedArray.splice(i,1);}}}else{k.entity=f.getFields()[1].getId().split("-")[1];k.createdIndex=f.getFields()[1].getId().split("-")[3];k.entityKey="(BP_GUID="+w.sItemPath+",AD_ID=\'"+o.BP_AddressesRel.results[parseInt(this.selectedIndex,10)].AD_ID+"\',COMM_TYPE=\'"+fcg.mdg.editbp.util.DataAccess.getDataFromPath(o,"BP_AddressesRel/results/"+this.selectedIndex+"/"+k.entity+"Rel/results/"+f.getFields()[1].getId().split("-")[3]+"/COMM_TYPE")+"\',CONSNUMBER=\'"+fcg.mdg.editbp.util.DataAccess.getDataFromPath(o,"BP_AddressesRel/results/"+this.selectedIndex+"/"+k.entity+"Rel/results/"+f.getFields()[1].getId().split("-")[3]+"/CONSNUMBER")+"\')";w.changedArray.push(k);}if(a==="telCancel"||a==="faxCancel"||a==="mobCancel"||a==="emailCancel"||a==="uriCancel"){for(i=0;i<(f.getFields().length-1);i++){c=f.getFields()[i];if(c.getValue()!==""){c.setValue("");}}v=fcg.mdg.editbp.handlers.Communication.getCommFieldCount(t,m,d,g,u,b,e);}else{f.destroyFields();b.removeFormElement(f.getId());}},getCommFieldCount:function(t,m,f,e,u,a,E){if((t+1)===m){fcg.mdg.editbp.handlers.Communication.vNewTelField="";if(E===fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("TEL"))fcg.mdg.editbp.handlers.Communication.handleDisableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);}else{fcg.mdg.editbp.handlers.Communication.handleEnableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);return true;}if((m+1)===f){fcg.mdg.editbp.handlers.Communication.vNewMobField="";if(E===fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("MOB"))fcg.mdg.editbp.handlers.Communication.handleDisableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);}else{fcg.mdg.editbp.handlers.Communication.handleEnableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);return true;}if((f+1)===e){fcg.mdg.editbp.handlers.Communication.vNewFaxField="";if(E===fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("FAX"))fcg.mdg.editbp.handlers.Communication.handleDisableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);}else{fcg.mdg.editbp.handlers.Communication.handleEnableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);return true;}if((e+1)===u){fcg.mdg.editbp.handlers.Communication.vNewEmailField="";if(E===fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("EMAIL"))fcg.mdg.editbp.handlers.Communication.handleDisableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);}else{fcg.mdg.editbp.handlers.Communication.handleEnableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);return true;}if((u+1)===a.getFormElements().length){fcg.mdg.editbp.handlers.Communication.vNewURIField="";if(E===fcg.mdg.editbp.handlers.Communication.oController.i18nBundle.getText("WEB"))fcg.mdg.editbp.handlers.Communication.handleDisableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);}else{fcg.mdg.editbp.handlers.Communication.handleEnableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);return true;}},handleDisableIcon:function(i,m){if(i==="toolCommIAVAdd"){sap.ui.getCore().byId("toolCommIAVAdd").setVisible(false);sap.ui.getCore().byId("toolCommIAVAddDisable").addStyleClass("sapGreyCell");sap.ui.getCore().byId("toolCommIAVAddDisable").setVisible(true);}if(sap.ui.getCore().byId(i).hasListeners("press")===true){sap.ui.getCore().byId(i).detachPress(m);}sap.ui.getCore().byId(i).addStyleClass("sapGreyCell");},handleEnableIcon:function(i,m){if(i==="toolCommIAVAdd"){sap.ui.getCore().byId("toolCommIAVAddDisable").setVisible(false);sap.ui.getCore().byId("toolCommIAVAdd").setVisible(true);}if(sap.ui.getCore().byId(i).hasListeners("press")===false){sap.ui.getCore().byId(i).attachPress(m);}sap.ui.getCore().byId(i).removeStyleClass("sapGreyCell");},removeIavForm:function(e){var c="";var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var n;var d=fcg.mdg.editbp.util.DataAccess.getCurrentModel();if(w.sCategory==="1"){c="BP_AddressVersionsPers";}else if(w.sCategory==="2"){c="BP_AddressVersionsOrg";}if(w.vCurrentActionId==="changeRB"){this.selectedIndex=fcg.mdg.editbp.handlers.Communication.selectedIndex;n=fcg.mdg.editbp.handlers.Communication.oCountDeepEntities[parseInt(this.selectedIndex,10)].numIAV;}else{n=0;}var f=e.getSource().getParent().getParent().getParent().getParent().getId().split("--")[0];var l=fcg.mdg.editbp.handlers.Communication.oController.getView().byId("communicationLayout");var g=e.getSource().getId();var h=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");if(g==="toolCommIAVCancel"){return;}else{for(var i=2;i<(l.getItems().length-1);i++){if(l.getItems()[i].getId()===f){var k=l.getItems()[i].getContent()[3].getSelectedKey();if(k!==""){for(var j=0;j<fcg.mdg.editbp.util.DataAccess.getValueHelpData()[6].data.results.length;j++){if(fcg.mdg.editbp.util.DataAccess.getValueHelpData()[6].data.results[j].KEY===k){var A=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[6].data.results[j];fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results.splice(j,0,A);var m=fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results;m.sort(function(a,b){return(a.TEXT>b.TEXT)?1:((b.TEXT>a.TEXT)?-1:0);});break;}}}else{fcg.mdg.editbp.handlers.Communication.handleEnableIcon("toolCommIAVAdd",fcg.mdg.editbp.handlers.Communication.addNewIAVGrp);}var o=l.getItems()[i].getContent()[3].getId().split("-")[1]+"Rel"+"-"+l.getItems()[i].getContent()[3].getId().split("-")[3]+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;fcg.mdg.editbp.handlers.Communication.aRemoveFields.push(o);var p={};if(f.split("-")[1]<n){p.action="D";fcg.mdg.editbp.handlers.Communication.oCountDeepEntities[parseInt(this.selectedIndex,10)].numIAV--;}if(p.action!=="D"){for(i=0;i<w.changedArray.length;){if(w.changedArray[i].action==="N"&&w.changedArray[i].entity===c&&w.changedArray[i].createdIndex===f.split("-")[1]){w.changedArray.splice(i,1);}else{i++;}}}else{p.entity=c;p.createdIndex=f.split("-")[1];p.entityKey="(BP_GUID="+w.sItemPath+",AD_ID=\'"+d.BP_AddressesRel.results[parseInt(this.selectedIndex,10)].AD_ID+"',ADDR_VERS=\'"+fcg.mdg.editbp.util.DataAccess.getDataFromPath(d,"BP_AddressesRel/results/"+this.selectedIndex+"/"+c+"Rel/results/"+f.split("-")[1]+"/ADDR_VERS")+"\')";w.changedArray.push(p);}sap.ui.getCore().byId(f).destroy();break;}}}if(h.getValueState()==="None"&&h.getValue()!==""){fcg.mdg.editbp.handlers.Communication.oController.oWizard.validateStep(fcg.mdg.editbp.handlers.Communication.oController.getView().byId("communicationStep"));}},addIavToolBar:function(f,w){var t=new sap.m.Title({text:w.i18nBundle.getText("ADDIAV"),level:"H4",titleStyle:"H4",layoutData:new sap.ui.layout.GridData({span:"L4 M4 S6"})});var h=new sap.m.HBox({layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});var i=new sap.ui.core.Icon({src:"sap-icon://sys-add",decorative:false,tooltip:"Add"});i.addStyleClass("sapGreyCell");i.addStyleClass("sapUiSmallMarginEnd");h.addItem(i);var a=new sap.ui.core.Icon({src:"sap-icon://sys-cancel",decorative:false,press:fcg.mdg.editbp.handlers.Communication.removeIavForm,tooltip:"Cancel"});h.addItem(a);f.addContent(t);f.addContent(h);},displayCommunication:function(w,m,v,a,t,l){var n="";var f=0;var d=fcg.mdg.editbp.handlers.Communication.getCurrentDispCommForm(w);for(var i=0;i<m.length;i++){var j=new sap.ui.model.json.JSONModel();j.setData(m[i]);if(n===""||n===undefined){var b=d.getContent().length-1;n=d.getContent()[b];}f=d.getContent().indexOf(n);if(i===0){var L=new sap.m.Label({text:a,visible:l});d.insertContent(L,f);L.setModel(j);n=L;f=d.getContent().indexOf(n);f=f+1;var c=new sap.m.Text({text:v,visible:t});d.insertContent(c,f);c.setModel(j);n=c;}else{f=f+1;var e=new sap.m.Text({text:v,layoutData:new sap.ui.layout.GridData({span:"L12 M12 S12",linebreakL:true,linebreakM:true,linebreakS:true})});d.insertContent(e,f);e.setModel(j);n=e;}f=d.getContent().indexOf(n);w.bpHookDisplayCommunicationAddress(w,m,v,a,t,this,f,d,i);}},hideIAVOrg:function(){sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-ADDR_VERS").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-TITLE").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-NAME2").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-SORT1").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-SORT2").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-STREET").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-HOUSE_NO").setVisible(false);sap.ui.getCore().byId("TXT-BP_AddressVersion_Organization-CITY").setVisible(false);},displayIAV:function(m,w){var n="";var f=0;var g=fcg.mdg.editbp.handlers.Communication.getCurrentDispCommForm(w);for(var i=0;i<m.length;i++){var a=new sap.ui.model.json.JSONModel();a.setData(m[i]);if(n===""||n===undefined){var t=g.getContent().length-1;n=g.getContent()[t];}else{f=g.getContent().indexOf(n);}f=f+1;if(i!==0){var l=new sap.m.Label({text:""});g.insertContent(l,f);n=l;f=g.getContent().indexOf(n);f=f+1;var b=new sap.m.Title({text:w.i18nBundle.getText("IAV")});g.insertContent(b,f);n=b;}f=g.getContent().indexOf(n);f=f+1;var c=new sap.m.Label({text:w.i18nBundle.getText("ADDRESSVERSION")});g.insertContent(c,f);n=c;f=g.getContent().indexOf(n);f=f+1;var d=new sap.m.Text({text:"{parts:[{path:'iav>/ADDR_VERS__TXT'},{path:'iav>/ChangeData/ADDR_VERS__TXT'}],formatter:'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/ADDR_VERS__TXT',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});g.insertContent(d,f);d.setModel(a,"iav");n=d;f=g.getContent().indexOf(n);f=f+1;var e=new sap.m.Label({text:w.i18nBundle.getText("TITLE")});g.insertContent(e,f);n=e;f=g.getContent().indexOf(n);f=f+1;var h;if(w.sCategory==="1"){h=new sap.m.Text({text:"{parts:[{path:'iav>/BP_AddressPersonVersionRel/TITLE_P__TXT'}, {path:'iav>/BP_AddressPersonVersionRel/ChangeData/TITLE_P__TXT'}],formatter:'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/BP_AddressPersonVersionRel/TITLE_P__TXT',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}else{h=new sap.m.Text({text:"{parts:[{path:'iav>/TITLE__TXT'}, {path:'iav>/ChangeData/TITLE__TXT'}],formatter:'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/TITLE__TXT',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}g.insertContent(h,f);h.setModel(a,"iav");n=h;f=g.getContent().indexOf(n);f=f+1;var j=new sap.m.Label({text:w.i18nBundle.getText("Name1")});if(w.sCategory==="1"){j.setText(w.i18nBundle.getText("F_Name"));}g.insertContent(j,f);n=j;f=g.getContent().indexOf(n);f=f+1;var k;if(w.sCategory==="1"){k=new sap.m.Text({text:"{parts:[{path:'iav>/BP_AddressPersonVersionRel/FIRSTNAME'},{path:'iav>/BP_AddressPersonVersionRel/ChangeData/FIRSTNAME'}],formatter:'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/BP_AddressPersonVersionRel/FIRSTNAME',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}else{k=new sap.m.Text({text:"{parts:[{path:'iav>/NAME'},{path:'iav>/ChangeData/NAME'}],formatter:'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/NAME',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}g.insertContent(k,f);k.setModel(a,"iav");n=k;f=g.getContent().indexOf(n);f=f+1;var o=new sap.m.Label({text:w.i18nBundle.getText("Name2")});if(w.sCategory==="1"){o.setText(w.i18nBundle.getText("L_Name"));}g.insertContent(o,f);n=o;f=g.getContent().indexOf(n);f=f+1;var p;if(w.sCategory==="1"){p=new sap.m.Text({text:"{parts: [{path: 'iav>/BP_AddressPersonVersionRel/LASTNAME'}, {path:'iav>/BP_AddressPersonVersionRel/ChangeData/LASTNAME'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/BP_AddressPersonVersionRel/LASTNAME',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}else{p=new sap.m.Text({text:"{parts: [{path: 'iav>/NAME_2'}, {path:'iav>/ChangeData/NAME_2'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/NAME_2',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}g.insertContent(p,f);p.setModel(a,"iav");n=p;f=g.getContent().indexOf(n);f=f+1;var q=new sap.m.Label({text:w.i18nBundle.getText("ST1")});g.insertContent(q,f);n=q;f=g.getContent().indexOf(n);f=f+1;var r;if(w.sCategory==="1"){r=new sap.m.Text({text:"{parts: [{path: 'iav>/BP_AddressPersonVersionRel/SORT1_P'}, {path:'iav>/BP_AddressPersonVersionRel/ChangeData/SORT1_P'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/BP_AddressPersonVersionRel/SORT1_P',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}else{r=new sap.m.Text({text:"{parts: [{path: 'iav>/SORT1'}, {path:'iav>/ChangeData/SORT1'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/SORT1',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}g.insertContent(r,f);r.setModel(a,"iav");n=r;f=g.getContent().indexOf(n);f=f+1;var s=new sap.m.Label({text:w.i18nBundle.getText("ST2")});g.insertContent(s,f);n=s;f=g.getContent().indexOf(n);f=f+1;var u;if(w.sCategory==="1"){u=new sap.m.Text({text:"{parts: [{path: 'iav>/BP_AddressPersonVersionRel/SORT2_P'}, {path:'iav>/BP_AddressPersonVersionRel/ChangeData/SORT2_P'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/BP_AddressPersonVersionRel/SORT2_P',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}else{u=new sap.m.Text({text:"{parts: [{path: 'iav>/SORT2'}, {path:'iav>/ChangeData/SORT2'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/SORT2',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});}g.insertContent(u,f);u.setModel(a,"iav");n=u;f=g.getContent().indexOf(n);f=f+1;var v=new sap.m.Label({text:w.i18nBundle.getText("Street")});g.insertContent(v,f);n=v;f=g.getContent().indexOf(n);f=f+1;var x=new sap.m.Text({text:"{parts: [{path: 'iav>/STREET'}, {path:'iav>/ChangeData/STREET'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/STREET',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});g.insertContent(x,f);x.setModel(a,"iav");n=x;f=g.getContent().indexOf(n);f=f+1;var y=new sap.m.Label({text:w.i18nBundle.getText("House Number")});g.insertContent(y,f);n=y;f=g.getContent().indexOf(n);f=f+1;var z=new sap.m.Text({text:"{parts: [{path: 'iav>/HOUSE_NO'}, {path:'iav>/ChangeData/HOUSE_NO'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/HOUSE_NO',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});g.insertContent(z,f);z.setModel(a,"iav");n=z;f=g.getContent().indexOf(n);f=f+1;var A=new sap.m.Label({text:w.i18nBundle.getText("CITY")});g.insertContent(A,f);n=A;f=g.getContent().indexOf(n);f=f+1;var B=new sap.m.Text({text:"{parts: [{path: 'iav>/CITY'}, {path:'iav>/ChangeData/CITY'}], formatter: 'fcg.mdg.editbp.util.Formatter.getBoldText'}",visible:"{path:'iav>/CITY',formatter:'fcg.mdg.editbp.util.Formatter.visibility'}"});g.insertContent(B,f);B.setModel(a,"iav");n=B;var W=fcg.mdg.editbp.handlers.Communication.getWizardInstance();W.bpHookDisplayIAV(this,W,m);}},setvHelpTitle:function(c,v,f){var w=fcg.mdg.editbp.handlers.Communication.oController;var r=fcg.mdg.editbp.util.DataAccess.getValueHelpData();var d=w.i18nBundle.getText("NONE");var t,a,i,e;if(c==="1"){v.setText(w.i18nBundle.getText("N1"));for(i=3;i<r.length;i++){switch(i){case 3:t=new sap.ui.model.json.JSONModel();t.setData(r[i].data);a=new sap.ui.core.Item({key:"{KEY}",text:"{TEXT}"});f.setModel(t);f.bindItems("/results",a);e=new sap.ui.core.Item({key:"",text:d});f.addItem(e);break;}}}else{for(i=4;i<r.length;i++){switch(i){case 4:t=new sap.ui.model.json.JSONModel();t.setData(r[i].data);a=new sap.ui.core.Item({key:"{KEY}",text:"{TEXT}"});f.setModel(t);f.bindItems("/results",a);e=new sap.ui.core.Item({key:"",text:d});f.addItem(e);f.setSelectedKey("");break;};}}},getCurrentDispCommForm:function(w){if(w.reEdit!=="X"){var c=this.CurrLayout.getContent();var g=c[c.length-1];return g;}else{return this.CurrLayout.getContent()[this.vReEditIndex];}},setCommlayout:function(l){this.CurrLayout=l;},setDispAddressTitle:function(w,t){var d=fcg.mdg.editbp.handlers.Communication.getCurrentDispCommForm(w);if(t===w.i18nBundle.getText("IAV")){d.getContent()[d.getContent().length-1].destroy();}if(t===w.i18nBundle.getText("Communication")){for(var i=0;i<d.getContent().length;i++){if(d.getContent()[i].getText()==="Communication"){d.getContent()[i].destroy();}}}else if(t==="address"){var f=d.getToolbar().getContent()[0];var a=d.getToolbar().getContent()[1];var s="";var h="";if(w.changedData.STREET!==undefined){s=w.changedData.STREET;}if(w.changedData.HOUSE_NO!==undefined){h=w.changedData.HOUSE_NO;}if(w.vCurrentActionId==="createRB"){a.setText(" ("+w.i18nBundle.getText("NEW")+")").addStyleClass("text_bold");f.setText(w.i18nBundle.getText("Addr_Comm")+" : "+s+" "+h);}else if(w.vCurrentActionId==="changeRB"){a.setText(" ("+w.i18nBundle.getText("CHANGE")+")").addStyleClass("text_bold");f.setText(w.i18nBundle.getText("Addr_Comm")+" : "+s+" "+h);}else if(w.vCurrentActionId==="deleteRB"){a.setText(" ("+w.i18nBundle.getText("DELETED")+")").addStyleClass("text_bold");f.setText(w.i18nBundle.getText("Addr_Comm")+" : "+s+" "+h);}}w.bpHooksetDispAddressTitle(this,w,d);},setEditCommModel:function(m,t){var i,k;if(t==="iav"){for(i=0;i<m.length;i++){this.oEditIAVModel=new sap.ui.model.json.JSONModel();if(this.oController.sCategory==="1"){this.oEditIAVModel.setData(m[i]);}else{this.oEditIAVModel.setData(m[i]);}this.addNewIAV();this.oIavNewForm.setModel(this.oEditIAVModel);for(k=0;k<fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results.length;k++){if(fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results[k].KEY===fcg.mdg.editbp.handlers.Communication.selectedAddVersion[i]){fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results.splice(k,1);k=k-1;}}}}else{for(i=1;i<m.length;i++){var e=new sap.ui.model.json.JSONModel();e.setData(m[i]);if(t==="tel"){this.addNewTel();this.vNewTelField.setModel(e);}else if(t==="mob"){this.addNewMob();this.vNewMobField.setModel(e);}else if(t==="fax"){this.addNewFax();this.vNewFaxField.setModel(e);}else if(t==="email"){this.addNewEmail();this.vNewEmailField.setModel(e);}else if(t==="uri"){this.addNewURI();this.vNewURIField.setModel(e);}}}},onTelChange:function(e){var i=e.getSource().getId().split("-")[3];var t="INP-BP_CommPhone-COUNTRY-"+i;sap.ui.getCore().byId(t).fireEvent("change");fcg.mdg.editbp.handlers.Communication.onChange_Create(e);},onMobChange:function(e){var i=e.getSource().getId().split("-")[3];var m="INP-BP_CommMobile-COUNTRY-"+i;sap.ui.getCore().byId(m).fireEvent("change");fcg.mdg.editbp.handlers.Communication.onChange_Create(e);},onFaxChange:function(e){var i=e.getSource().getId().split("-")[3];var f="INP-BP_CommFax-COUNTRY-"+i;sap.ui.getCore().byId(f).fireEvent("change");fcg.mdg.editbp.handlers.Communication.onChange_Create(e);},onCountryVH:function(c){var g=this;var w=fcg.mdg.editbp.handlers.Communication.oController;var C=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[5].data;var a=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");var b=sap.ui.getCore().byId("INP-BP_Address-COUNTRY__TXT");var r=sap.ui.getCore().byId("INP-BP_Address-REGION");var d=sap.ui.getCore().byId("INP-BP_Address-REGION__TXT");var t=sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0");var m=sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0");var f=sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0");if(sap.ui.getCore().byId("CountryDialog")!==undefined){sap.ui.getCore().byId("CountryDialog").destroy();this.oCountryValueHelp="";}var o=new sap.m.SelectDialog({id:"CountryDialog",title:w.i18nBundle.getText("COUNTRIES"),noDataText:w.i18nBundle.getText("LOAD")+"...",items:{path:"/CountryValues",template:new sap.m.StandardListItem({title:"{TEXT}",description:"{KEY}"})},confirm:function(E){a.setValueState("None");a.setValueStateText("");a.setValue(E.getParameters().selectedItem.getProperty("description"));b.setValue(E.getParameters().selectedItem.getProperty("title"));g.vCountry=a.getValue();if(fcg.mdg.editbp.handlers.Communication.vOldCountry!==a.getValue()&&c.getSource().getId()===a.getId()){fcg.mdg.editbp.handlers.Communication.reloadFragment();fcg.mdg.editbp.handlers.Communication.validatePostalCode();fcg.mdg.editbp.handlers.Communication.validateRegion();}fcg.mdg.editbp.handlers.Communication.vOldCountry=a.getValue();if(b!==undefined){b.setValue(E.getParameters().selectedItem.getProperty("title"));if(r!==undefined){r.setValueState("None");r.setValueStateText("");t.setValue(a.getValue());m.setValue(a.getValue());f.setValue(a.getValue());}a.fireEvent("change");}},search:function(E){var v=E.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var h=o.getItems();for(var i=0;i<h.length;i++){if(v.length>0){var s=h[i].getBindingContext().getProperty("KEY");var j=h[i].getBindingContext().getProperty("TEXT");if(s.toUpperCase().indexOf(v)===-1&&j.toUpperCase().indexOf(v)===-1){h[i].setVisible(false);}else{h[i].setVisible(true);}}else{h[i].setVisible(true);}}},liveChange:function(E){var v=E.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var h=o.getItems();for(var i=0;i<h.length;i++){if(v.length>0){var s=h[i].getBindingContext().getProperty("KEY");var j=h[i].getBindingContext().getProperty("TEXT");if(s.toUpperCase().indexOf(v)===-1&&j.toUpperCase().indexOf(v)===-1){h[i].setVisible(false);}else{h[i].setVisible(true);}}else{h[i].setVisible(true);}}}});if(C.results.length>0){var I=new sap.m.StandardListItem({title:"{TEXT}",description:"{KEY}",active:true});var e=new sap.ui.model.json.JSONModel();e.setData(C);o.setModel(e);o.setGrowingThreshold(C.results.length);o.bindAggregation("items","/results",I);}else{o.setNoDataText(w.i18nBundle.getText("NO_DATA"));}o.open();},onCountryKeyChange:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;var C=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[5].data;var o=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");o.setValue(o.getValue().toUpperCase());var a=o.getValue();var b=sap.ui.getCore().byId("INP-BP_Address-COUNTRY__TXT");var r=sap.ui.getCore().byId("INP-BP_Address-REGION");var R=sap.ui.getCore().byId("INP-BP_Address-REGION__TXT");var l=fcg.mdg.editbp.handlers.Communication.vOldCountry;var d=a.replace(/^[ ]+|[ ]+$/g,"");this.vCountry=d;if(d!==""){var e=false;for(var i=0;i<C.results.length;i++){if(C.results[i].KEY===d){if(o.getValue()!==""){b.setValue(C.results[i].TEXT);o.setValueState("None");fcg.mdg.editbp.handlers.Communication.onChange_Create(c);b.fireEvent("change");}if(sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").getValue()===l){sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").setValue(o.getValue());}if(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getValue()===l){sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").setValue(o.getValue());}if(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getValue()===l){sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").setValue(o.getValue());}fcg.mdg.editbp.handlers.Communication.handleEnableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);fcg.mdg.editbp.handlers.Communication.handleEnableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);fcg.mdg.editbp.handlers.Communication.handleEnableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);fcg.mdg.editbp.handlers.Communication.reloadFragment();fcg.mdg.editbp.handlers.Communication.validateRegion();fcg.mdg.editbp.handlers.Communication.validatePostalCode();e=true;break;}}if(e===false){b.setValue();o.setValueState("Error");sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").setValue();sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").setValue();sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").setValue();if(r.getValue()!==""){r.setValueState("Error");r.setValueStateText(o.getValueStateText());}R.setValue();var f=w.i18nBundle.getText("CountryMSG",o.getValue());o.setValueStateText(f);}}else{o.setValue();b.setValue();if(r.getValue()!==""){R.setValue();r.setValueState("Error");r.setValueStateText("");}if(sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").getValue()===l){sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").setValue("");}if(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getValue()===l){sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").setValue("");}if(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getValue()===l){sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").setValue("");}fcg.mdg.editbp.handlers.Communication.reloadFragment();fcg.mdg.editbp.handlers.Communication.onChange_Create(c);b.fireEvent("change");}fcg.mdg.editbp.handlers.Communication.vOldCountry=sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue();},onCommCountryVH:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;var C=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[5].data;var a=c.getSource();if(sap.ui.getCore().byId("CountryDialog")!==undefined){sap.ui.getCore().byId("CountryDialog").destroy();this.oCountryValueHelp="";}var o=new sap.m.SelectDialog({id:"CountryDialog",title:w.i18nBundle.getText("COUNTRIES"),noDataText:w.i18nBundle.getText("LOAD")+"...",items:{path:"/CountryValues",template:new sap.m.StandardListItem({title:"{TEXT}",description:"{KEY}"})},confirm:function(e){a.setValueState("None");a.setValueStateText("");a.setValue(e.getParameters().selectedItem.getProperty("description"));a.fireEvent("change");},search:function(e){var v=e.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var d=o.getItems();for(var i=0;i<d.length;i++){if(v.length>0){var s=d[i].getBindingContext().getProperty("KEY");var f=d[i].getBindingContext().getProperty("TEXT");if(s.toUpperCase().indexOf(v)===-1&&f.toUpperCase().indexOf(v)===-1){d[i].setVisible(false);}else{d[i].setVisible(true);}}else{d[i].setVisible(true);}}},liveChange:function(e){var v=e.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var d=o.getItems();for(var i=0;i<d.length;i++){if(v.length>0){var s=d[i].getBindingContext().getProperty("KEY");var f=d[i].getBindingContext().getProperty("TEXT");if(s.toUpperCase().indexOf(v)===-1&&f.toUpperCase().indexOf(v)===-1){d[i].setVisible(false);}else{d[i].setVisible(true);}}else{d[i].setVisible(true);}}}});if(C.results.length>0){var I=new sap.m.StandardListItem({title:"{TEXT}",description:"{KEY}",active:true});var b=new sap.ui.model.json.JSONModel();b.setData(C);o.setModel(b);o.setGrowingThreshold(C.results.length);o.bindAggregation("items","/results",I);}else{o.setNoDataText(w.i18nBundle.getText("NO_DATA"));}o.open();},onCommCountryKeyChange:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;var C=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[5].data;var o=c.getSource();o.setValue(o.getValue().toUpperCase());var a=o.getValue();var b=a.replace(/^[ ]+|[ ]+$/g,"");if(b!==""){var d=false;for(var i=0;i<C.results.length;i++){if(C.results[i].KEY===b){if(o.getValue()!==""){o.setValueState("None");fcg.mdg.editbp.handlers.Communication.onChange_Create(c);}d=true;break;}}if(d===false){o.setValueState("Error");var e=w.i18nBundle.getText("CountryMSG",o.getValue());o.setValueStateText(e);}}else{o.setValue();o.setValueState("None");o.setValueStateText("");fcg.mdg.editbp.handlers.Communication.onChange_Create(c);}},onValueHelpTextChange:function(c){c.getSource().setValue(c.getSource().getValue().toUpperCase());var a=c.getSource().getValue();if(a.replace(/^[ ]+|[ ]+$/g,"")===""){c.getSource().setValue("");}fcg.mdg.editbp.handlers.Communication.onChange_Create(c);},onPostalCodeChange:function(c){var p=c.getSource().getValue();if(p.replace(/^[ ]+|[ ]+$/g,'')==="")c.getSource().setValue("");fcg.mdg.editbp.handlers.Communication.validatePostalCode();fcg.mdg.editbp.handlers.Communication.onChange_Create(c);},validatePostalCode:function(){var w=fcg.mdg.editbp.handlers.Communication.oController;var c=sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue();var p=sap.ui.getCore().byId("INP-BP_Address-POSTL_COD1");var a=p.getValue();if(c!==""&&a!==""){var q="/ValueHelpCollection?$filter=";q=q+jQuery.sap.encodeURL("ENTITY eq 'BP_Address' and FILTER eq 'COUNTRY="+c+"/POSTL_COD1="+a+"' and ATTR_NAME eq 'POSTL_COD1'");var m=new sap.ui.model.odata.ODataModel(w.getView().getModel().sServiceUrl,true);m.read(q,null,null,false,function(d,e){p.setValueState("None");},function(e){p.setValueState("Error");var b=JSON.parse(e.response.body);var d=b.error.message.value;p.setValueStateText(d);});}},validateRegion:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;var C=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");var a=C.getValue();var r=sap.ui.getCore().byId("INP-BP_Address-REGION__TXT");var R=sap.ui.getCore().byId("INP-BP_Address-REGION");var b=R.getValue();var d=b.replace(/^[ ]+|[ ]+$/g,"");if(d!==""){var q="/ValueHelpCollection?$filter=";q=q+jQuery.sap.encodeURL("ENTITY eq 'BP_Person' and FILTER eq 'COUNTRY="+a+"' and ATTR_NAME eq 'REGION' and ATTR_VALUE eq '"+d+"'");fcg.mdg.editbp.handlers.Communication.oRegionModel=new sap.ui.model.odata.ODataModel(w.getView().getModel().sServiceUrl,true);fcg.mdg.editbp.handlers.Communication.oRegionModel.read(q,null,null,true,function(e,E){fcg.mdg.editbp.handlers.Communication.vRegionFlag=true;if(R.getValue()!==""){var f=e.results[0].TEXT;R.setValueState("None");r.setValue(f);if(c!==undefined){r.fireEvent("change");}if(fcg.mdg.editbp.handlers.Communication.vRegionTextFlag){fcg.mdg.editbp.handlers.Communication.vRegionTextFlag=false;w.getView().byId("wizardId").fireEvent("complete");}}},function(e){fcg.mdg.editbp.handlers.Communication.vRegionFlag=false;r.setValue();R.setValueState("Error");var f=JSON.parse(e.response.body);var g=f.error.message.value;R.setValueStateText(g);if(fcg.mdg.editbp.handlers.Communication.vRegionTextFlag){fcg.mdg.editbp.handlers.Communication.vRegionTextFlag=false;}});}else{r.setValue();R.setValueState("None");}if(c!==undefined){fcg.mdg.editbp.handlers.Communication.onChange_Create(c);}},handleRequestCompleted:function(){fcg.mdg.editbp.handlers.Communication.vRegionTextFlag=true;},onRegionVH:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;var r=sap.ui.getCore().byId("INP-BP_Address-REGION");var C=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");var a=C.getValue();var b=sap.ui.getCore().byId("INP-BP_Address-REGION__TXT");if(a===""){r.setValueState("Error");r.setValueStateText(w.i18nBundle.getText("REGION_CHECK"));C.setValueState("Error");C.setValueStateText(w.i18nBundle.getText("DEP_MSG"));return;}if(C.getValueState()==="Error"){b.setValue("");r.setValueState("Error");r.setValueStateText(C.getValueStateText());return;}var f=[];var F=new sap.ui.model.Filter('COUNTRY','EQ',a);f.push(F);if(sap.ui.getCore().byId("RegionDialog")!==undefined){sap.ui.getCore().byId("RegionDialog").destroy();}var s=new sap.m.SelectDialog({id:"RegionDialog",title:w.i18nBundle.getText("REGIONS"),noDataText:w.i18nBundle.getText("LOAD")+"...",confirm:function(e){r.setValueState("None");r.setValueStateText("");r.setValue(e.getParameters().selectedItem.getProperty("description"));b.setValue(e.getParameters().selectedItem.getProperty("title"));r.fireEvent("change");},search:function(e){var v=e.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var I=s.getItems();for(var i=0;i<I.length;i++){if(v.length>0){var R=I[i].getBindingContext().getProperty("KEY");var d=I[i].getBindingContext().getProperty("TEXT");if(R.toUpperCase().indexOf(v)===-1&&d.toUpperCase().indexOf(v)===-1){I[i].setVisible(false);}else{I[i].setVisible(true);}}else{I[i].setVisible(true);}}},liveChange:function(e){var v=e.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var I=s.getItems();for(var i=0;i<I.length;i++){if(v.length>0){var R=I[i].getBindingContext().getProperty("KEY");var d=I[i].getBindingContext().getProperty("TEXT");if(R.toUpperCase().indexOf(v)===-1&&d.toUpperCase().indexOf(v)===-1){I[i].setVisible(false);}else{I[i].setVisible(true);}}else{I[i].setVisible(true);}}}});var q="/ValueHelpCollection?$filter=";q=q+jQuery.sap.encodeURL("ENTITY eq 'BP_Person' and FILTER eq 'COUNTRY="+a+"' and ATTR_NAME eq 'REGION'");var m=new sap.ui.model.odata.ODataModel(w.getView().getModel().sServiceUrl,true);m.read(q,null,null,true,function(d,e){if(d.results.length>0){var i=new sap.m.StandardListItem({title:"{TEXT}",description:"{KEY}",active:true});var I=new sap.ui.model.json.JSONModel();I.setData(d);s.setModel(I);s.setGrowingThreshold(d.results.length);s.bindAggregation("items","/results",i);}else{s.setNoDataText(w.i18nBundle.getText("NO_DATA"));}});s.open();},onRegionChange:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;sap.ui.getCore().byId("INP-BP_Address-REGION").setValue(sap.ui.getCore().byId("INP-BP_Address-REGION").getValue().toUpperCase());var C=sap.ui.getCore().byId("INP-BP_Address-COUNTRY");var a=C.getValue().toUpperCase();var r=sap.ui.getCore().byId("INP-BP_Address-REGION");var R=sap.ui.getCore().byId("INP-BP_Address-REGION__TXT");var b=r.getValue();var d=b.replace(/^[ ]+|[ ]+$/g,"");if(a.replace(/^[ ]+|[ ]+$/g,"")===""||C.getValueState()==="Error"){if(d===""){r.setValue(d);R.setValue(d);return;}R.setValue();r.setValueState("Error");if(C.getValueState()==="Error"&&C.getValue()!==""){r.setValueStateText(C.getValueStateText());}else{r.setValueStateText(w.i18nBundle.getText("REGION_CHECK"));C.setValueState("Error");C.setValueStateText(w.i18nBundle.getText("DEP_MSG"));}}else{fcg.mdg.editbp.handlers.Communication.validateRegion(c);}},onAddressChange:function(e){var w=fcg.mdg.editbp.handlers.Communication.oController;var a=e.getSource();var b=a.getSelectedKey();var p=a.getId().split("-")[3];var I="INP-BP_AddressVersionsOrg";if(w.sCategory==="1"){I="INP-BP_AddressVersionsPers";}var f=fcg.mdg.editbp.handlers.Communication.getIavFields(I,p);if(e.getSource().getSelectedKey()===""){}else{fcg.mdg.editbp.handlers.Communication.setEnableForFields(f,true);a.setSelectedKey(b);fcg.mdg.editbp.handlers.Communication.selectedAddVersion[p]=b;fcg.mdg.editbp.handlers.Communication.onChange_Create(e);var c=I.split("-")[1]+"Rel"+"-"+p+"-"+fcg.mdg.editbp.handlers.Communication.oController.vCurrentActionId;for(var i=0;i<fcg.mdg.editbp.handlers.Communication.aRemoveFields.length;i++){if(fcg.mdg.editbp.handlers.Communication.aRemoveFields[i]===c){fcg.mdg.editbp.handlers.Communication.aRemoveFields.splice(i,1);i=i-1;}}var d=e.getSource().getSelectedIndex();fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results.splice(d,1);fcg.mdg.editbp.handlers.Communication.handleEnableIcon("toolCommIAVAdd",fcg.mdg.editbp.handlers.Communication.addNewIAVGrp);sap.ui.getCore().byId(a.getId()).setEnabled(false);return;}fcg.mdg.editbp.handlers.Communication.onChange_Create(e);},onCorsLangChange:function(c){var w=fcg.mdg.editbp.handlers.Communication.oController;var l=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[2].data;var f=c.getSource().getId().split("-");f=f[0];sap.ui.getCore().byId("INP-BP_Address-LANGU").setValue(sap.ui.getCore().byId("INP-BP_Address-LANGU").getValue().toUpperCase());var C=sap.ui.getCore().byId("INP-BP_Address-LANGU");var a=C.getValue();var b=a.replace(/^[ ]+|[ ]+$/g,"");b=b.toUpperCase();var o=sap.ui.getCore().byId("INP-BP_Address-LANGU__TXT");if(b!==""){var d=false;for(var i=0;i<l.results.length;i++){if(l.results[i].KEY===b){if(C.getValue()!==""){fcg.mdg.editbp.handlers.Communication.vLangu=l.results[i].ATTR_VALUE;o.setValue(l.results[i].TEXT);fcg.mdg.editbp.handlers.Communication.onChange_Create(c);o.fireEvent("change");}d=true;C.setValueState("None");break;}}if(d===false){fcg.mdg.editbp.handlers.Communication.vLangu="";o.setValue();C.setValueState("Error");var F="";if(w.bpCategory==="1"){F=w.i18nBundle.getText("CLANG");}if(w.bpCategory==="2"){F=w.i18nBundle.getText("LANGUAGE");}var e=w.i18nBundle.getText("LANG_ERROR",C.getValue());C.setValueStateText(e);}}else{fcg.mdg.editbp.handlers.Communication.vLangu="";C.setValue();C.setValueState("None");o.setValue();fcg.mdg.editbp.handlers.Communication.onChange_Create(c);o.fireEvent("change");}},onCLangVH:function(c){var g=this;var w=fcg.mdg.editbp.handlers.Communication.oController;var l=fcg.mdg.editbp.util.DataAccess.getValueHelpData()[2].data;if(sap.ui.getCore().byId("CorrespodingLangDialog")!==undefined){sap.ui.getCore().byId("CorrespodingLangDialog").destroy();}var s=new sap.m.SelectDialog({id:"CorrespodingLangDialog",title:w.i18nBundle.getText("LANG"),noDataText:w.i18nBundle.getText("LOAD")+"...",confirm:function(e){sap.ui.getCore().byId("INP-BP_Address-LANGU").setValueState("None");sap.ui.getCore().byId("INP-BP_Address-LANGU__TXT").setValueStateText("");sap.ui.getCore().byId("INP-BP_Address-LANGU").setValue(e.getParameters().selectedItem.getProperty("description"));sap.ui.getCore().byId("INP-BP_Address-LANGU__TXT").setValue(e.getParameters().selectedItem.getProperty("title"));sap.ui.getCore().byId("INP-BP_Address-LANGU").fireEvent("change");},search:function(e){var v=e.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var a=s.getItems();for(var i=0;i<a.length;i++){if(v.length>0){var L=a[i].getBindingContext().getProperty("KEY");var b=a[i].getBindingContext().getProperty("TEXT");fcg.mdg.editbp.handlers.Communication.vLangu=a[i].getBindingContext().getProperty("ATTR_VALUE");if(L.toUpperCase().indexOf(v)===-1&&b.toUpperCase().indexOf(v)===-1){a[i].setVisible(false);}else{a[i].setVisible(true);}}else{a[i].setVisible(true);}}},liveChange:function(e){var v=e.getParameter("value").toUpperCase();v=v.replace(/^[ ]+|[ ]+$/g,"");var a=s.getItems();for(var i=0;i<a.length;i++){if(v.length>0){var L=a[i].getBindingContext().getProperty("KEY");var b=a[i].getBindingContext().getProperty("TEXT");fcg.mdg.editbp.handlers.Communication.vLangu=a[i].getBindingContext().getProperty("ATTR_VALUE");if(L.toUpperCase().indexOf(v)===-1&&b.toUpperCase().indexOf(v)===-1){a[i].setVisible(false);}else{a[i].setVisible(true);}}else{a[i].setVisible(true);}}}});if(l!==null&&l.results.length>0){var I=new sap.m.StandardListItem({title:"{TEXT}",description:"{KEY}",active:true});var o=new sap.ui.model.json.JSONModel();o.setData(l);s.setModel(o);s.setGrowingThreshold(l.results.length);s.bindAggregation("items","/results",I);}else{s.setNoDataText(g.i18nBundle.getText("NO_DATA"));}s.open();},setEnableForFields:function(f,s){for(var i=0;i<f.length;i++){sap.ui.getCore().byId(f[i]).setEnabled(s);}},setEmptyForFields:function(f,v,p){for(var i=0;i<f.length;i++){if(f==="INP-BP_AddressVersionsOrg-TITLE-"+p){f.setSelectedKey("");}sap.ui.getCore().byId(f[i]).setValue(v);}},setVisiblityForFields:function(f,s){for(var i=0;i<f.length;i++){if(sap.ui.getCore().byId(f[i])!==undefined)sap.ui.getCore().byId(f[i]).setVisible(s);}},getIavFields:function(i,I){var a;var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var s;if(w.sCategory==="1"){s="INP-BP_AddressPersonVersion";a=[s+"-TITLE_P-"+I,s+"-FIRSTNAME-"+I,s+"-LASTNAME-"+I,s+"-SORT1_P-"+I,s+"-SORT2_P-"+I,i+"-STREET-"+I,i+"-HOUSE_NO-"+I,i+"-CITY-"+I];}else{a=[i+"-TITLE-"+I,i+"-NAME-"+I,i+"-NAME2-"+I,i+"-SORT1-"+I,i+"-SORT2-"+I,i+"-STREET-"+I,i+"-HOUSE_NO-"+I,i+"-CITY-"+I];}return a;},checkModelData:function(d){if(d===undefined){return;}if(d.results!==undefined&&d.results.length!==0){for(var i=0;i<d.results.length;i++){if(d.results[i].length===0){d.results.splice(i,1);i=i-1;}}return d.results;}},handleReloadFragFields:function(f,v,F){var i;if(F){for(i=0;i<f.length;i++){if(sap.ui.getCore().byId(f[i])!==undefined)sap.ui.getCore().byId(f[i]).setValue(v[Object.keys(v)[i]]);}}else{for(i=0;i<f.length;i++){if(sap.ui.getCore().byId(f[i])!==undefined){v[Object.keys(v)[i]]=sap.ui.getCore().byId(f[i]).getValue();}}}},reloadFragment:function(){var w=fcg.mdg.editbp.handlers.Communication.oController;var f=["INP-BP_Address-HOUSE_NO","INP-BP_Address-STREET","INP-BP_Address-CITY","INP-BP_Address-POSTL_COD1","INP-BP_Address-REGION","INP-BP_Address-REGION__TXT","INP-BP_Address-COUNTRY","INP-BP_Address-COUNTRY__TXT","INP-BP_Address-LANGU","INP-BP_Address-LANGU__TXT","INP-BP_Address-PO_BOX","INP-BP_Address-POSTL_COD3"];var a=["INP-BP_Address-HOUSE_NO","INP-BP_Address-STREET","INP-BP_Address-CITY","INP-BP_Address-POSTL_COD1","INP-BP_Address-REGION","INP-BP_Address-REGION__TXT","INP-BP_Address-COUNTRY","INP-BP_Address-COUNTRY__TXT"];var b=["INP-BP_Address-LANGU","INP-BP_Address-LANGU__TXT","INP-BP_Address-PO_BOX","INP-BP_Address-POSTL_COD3"];var c={HouseNumber:"",Street:"",City:"",PostalCode:"",Region:"",RegionName:"",CountryKey:"",CountryName:"",LanguageKeyIso:"",CorsLangText:"",POBox:"",CompanyPostalCode:"",District:""};if(w.sCategory==="2"){this.handleReloadFragFields(f,c,false);if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue()==="US"){this.oAddressCreate.destroy();this.oAddressCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressEditUS',w);w.getView().byId("communicationLayout").insertItem(this.oAddressCreate,1);this.handleReloadFragFields(f,c,true);this.setVisiblityForFields(b,true);sap.ui.getCore().byId("INP-BP_Address-DISTRICT").setValue(c.District);}else{this.oAddressCreate.destroy();this.oAddressCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressEdit',w);w.getView().byId("communicationLayout").insertItem(this.oAddressCreate,1);this.handleReloadFragFields(f,c,true);this.setVisiblityForFields(b,true);}}else{this.handleReloadFragFields(a,c,false);if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValue()==="US"){this.oAddressCreate.destroy();this.oAddressCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressEditUS',w);w.getView().byId("communicationLayout").insertItem(this.oAddressCreate,1);this.handleReloadFragFields(a,c,true);this.setVisiblityForFields(b,false);sap.ui.getCore().byId("INP-BP_Address-DISTRICT").setValue(c.District);}else{this.oAddressCreate.destroy();this.oAddressCreate=sap.ui.xmlfragment('fcg.mdg.editbp.frag.bp.AddressEdit',w);w.getView().byId("communicationLayout").insertItem(this.oAddressCreate,1);this.handleReloadFragFields(a,c,true);this.setVisiblityForFields(b,false);}}},submitCreateQuery:function(q){var i,k;for(var j=0;j<q.length;j++){var a=q[j].body;for(i=0;i<Object.keys(a).length;i++){if(Object.keys(a)[i]==="BP_CommPhoneRel"){a.BP_CommPhoneRel=a.BP_CommPhoneRel.results;for(k=0;k<a.BP_CommPhoneRel.length;k++){if(k===0){a.BP_CommPhoneRel[k]["R_3_USER"]="1";a.BP_CommPhoneRel[k]["STD_NO"]="X";}}}else if(Object.keys(a)[i]==="BP_CommMobileRel"){a.BP_CommMobileRel=a.BP_CommMobileRel.results;for(k=0;k<a.BP_CommMobileRel.length;k++){if(k===0){a.BP_CommMobileRel[k]["R_3_USER"]="3";a.BP_CommMobileRel[k]["STD_NO"]="X";}else{a.BP_CommMobileRel[k]["R_3_USER"]="2";}}}else if(Object.keys(a)[i]==="BP_CommFaxRel"){a.BP_CommFaxRel=a.BP_CommFaxRel.results;for(k=0;k<a.BP_CommFaxRel.length;k++){if(k===0){a.BP_CommFaxRel[k]["STD_NO"]="X";}}}else if(Object.keys(a)[i]==="BP_CommEMailRel"){a.BP_CommEMailRel=a.BP_CommEMailRel.results;for(k=0;k<a.BP_CommEMailRel.length;k++){if(k===0){a.BP_CommEMailRel[k]["STD_NO"]="X";}}}else if(Object.keys(a)[i]==="BP_CommURIRel"){a.BP_CommURIRel=a.BP_CommURIRel.results;for(k=0;k<a.BP_CommURIRel.length;k++){if(k===0){a.BP_CommURIRel[k]["STD_NO"]="X";}a.BP_CommURIRel[k]["URI_TYPE"]="HPG";}}else if(Object.keys(a)[i]==="BP_AddressVersionsOrgRel"){a.BP_AddressVersionsOrgRel=this.removeValueHelpText("BP_AddressVersionsOrgRel",a.BP_AddressVersionsOrgRel.results);}else if(Object.keys(a)[i]==="BP_AddressVersionsPersRel"){a.BP_AddressVersionsPersRel=this.removeValueHelpText("BP_AddressVersionsPersRel",a.BP_AddressVersionsPersRel.results);}if(Object.keys(a)[i]==="LANGUISO"){a["LANGU"]=fcg.mdg.editbp.handlers.Communication.vLangu;delete a.LANGUISO;fcg.mdg.editbp.handlers.Communication.vLangu="";}}if(this.oController.oDetailComm.BP_AddressesRel!==undefined){if(this.oController.oDetailComm.BP_AddressesRel.results.length===0&&j===0){a["STANDARDADDRESS"]="X";a["BP_UsagesOfAddressRel"]=[];a["BP_UsagesOfAddressRel"].push({"ADDRESSTYPE":"XXDEFAULT"});}}}var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var e=w.bpHookAddressSubmitCreateQuery(this,q);if(e!==undefined){q=e;}return q;},submitChangeQuery:function(q){var j;for(j=0;j<q.length;j++){var e=q[j].changes;delete e.ChangeData;if(q[j].entity==="BP_Address"){var i;for(i=0;i<Object.keys(q[j].changes).length;i++){if(Object.keys(q[j].changes)[i]==="LANGUISO"){e["LANGU"]=fcg.mdg.editbp.handlers.Communication.vLangu;break;}}}if((q[j].entity==="BP_CommMobile"||q[j].entity==="BP_CommPhone"||q[j].entity==="BP_CommEMail"||q[j].entity==="BP_CommURI"||q[j].entity==="BP_CommFax")&&(q[j].body==="N")){if(q[j].key==="0"){switch(q[j].entity){case"BP_CommMobile":e["R_3_USER"]="3";break;case"BP_CommPhone":e["R_3_USER"]="1";break;case"BP_CommURI":e["URI_TYPE"]="HPG";break;}e["STD_NO"]="X";}}if(q[j].entity==="BP_AddressVersionsOrg"){delete e.TITLE__TXT;delete e.ADDR_VERS__TXT;}if(q[j].entity==="BP_AddressVersionsPers"){if(q[j].body==='D'||q[j].body==='U'){q[j].entity="BP_AddressVersion_Person";}}if(q[j].entity==="BP_AddressVersionsOrg"){if(q[j].body==='U'||q[j].body==='D'){q[j].entity="BP_AddressVersion_Organization";}}if(q[j].entity==="BP_AddressPersonVersion"){if(q[j].body==='D'||q[j].body==='U'){q[j].entity="BP_PersonVersion";}else{q.splice(j,1);j--;}}}var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var E=w.bpHookAddressSubmitChangeQuery(this,q);if(E!==undefined){q=E;}return q;},removeValueHelpText:function(e,r){var i;if(e==="BP_AddressVersionsOrgRel"){for(i=0;i<r.length;i++){delete r[i].TITLE__TXT;delete r[i].ADDR_VERS__TXT;}return r;}if(e==="BP_AddressVersionsPersRel"){for(i=0;i<r.length;i++){for(var l=0;l<Object.keys(r[i]).length;l++){if(Object.keys(r[i])[l]==="TITLE"){r[i]["TITLE_P"]=r[i][Object.keys(r[i])[l]];}if(Object.keys(r[i])[l]==="NAME"){r[i]["FIRSTNAME"]=r[i][Object.keys(r[i])[l]];}if(Object.keys(r[i])[l]==="NAME_2"){r[i]["LASTNAME"]=r[i][Object.keys(r[i])[l]];}}delete r[i].TITLE_P;delete r[i].TITLE_P__TXT;delete r[i].ADDR_VERS__TXT;delete r[i].NAME;delete r[i].NAME_2;}return r;}},getCommFieldvalue:function(v){if(v!==undefined&&v!==""){return true;}else return false;},checkDataExsistinRemoveArrary:function(e,a){for(var i=0;i<this.aRemoveFields.length;i++){if(this.aRemoveFields[i].split("-")[0]===e+"Rel"&&this.aRemoveFields[i].split("-")[1]===a&&this.aRemoveFields[i].split("-")[2]===this.oController.vCurrentActionId){this.aRemoveFields.splice(i,1);i=i-1;}}},handleCommIconEnableDisable:function(e,i){switch(e){case'BP_CommPhone':if(sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").getValue()===""&&sap.ui.getCore().byId("INP-BP_CommPhone-TELEPHONE-0").getValue()===""&&sap.ui.getCore().byId("INP-BP_CommPhone-EXTENSION-0").getValue()===""){fcg.mdg.editbp.handlers.Communication.handleDisableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);}else if(sap.ui.getCore().byId("INP-BP_CommPhone-COUNTRY-0").getValue()!==""||sap.ui.getCore().byId("INP-BP_CommPhone-TELEPHONE-0").getValue()!==""||sap.ui.getCore().byId("INP-BP_CommPhone-EXTENSION-0").getValue()!==""){fcg.mdg.editbp.handlers.Communication.handleEnableIcon("telCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementTel);if(this.aRemoveFields.length!==0)this.checkDataExsistinRemoveArrary(e,i.split('-')[3]);}break;case'BP_CommMobile':if(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getValue()===""&&sap.ui.getCore().byId("INP-BP_CommMobile-TELEPHONE-0").getValue()===""){fcg.mdg.editbp.handlers.Communication.handleDisableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);}else if(sap.ui.getCore().byId("INP-BP_CommMobile-COUNTRY-0").getValue()!==""||sap.ui.getCore().byId("INP-BP_CommMobile-TELEPHONE-0").getValue()!==""){fcg.mdg.editbp.handlers.Communication.handleEnableIcon("mobCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementMob);if(this.aRemoveFields.length!==0)this.checkDataExsistinRemoveArrary(e,i.split('-')[3]);}break;case'BP_CommFax':if(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getValue()===""&&sap.ui.getCore().byId("INP-BP_CommFax-FAX-0").getValue()===""&&sap.ui.getCore().byId("INP-BP_CommFax-EXTENSION-0").getValue()===""){fcg.mdg.editbp.handlers.Communication.handleDisableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);}else if(sap.ui.getCore().byId("INP-BP_CommFax-COUNTRY-0").getValue()!==""||sap.ui.getCore().byId("INP-BP_CommFax-FAX-0").getValue()!==""||sap.ui.getCore().byId("INP-BP_CommFax-EXTENSION-0").getValue()!==""){fcg.mdg.editbp.handlers.Communication.handleEnableIcon("faxCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementFax);if(this.aRemoveFields.length!==0)this.checkDataExsistinRemoveArrary(e,i.split('-')[3]);}break;case'BP_CommURI':if(sap.ui.getCore().byId("INP-BP_CommURI-URI-0").getValue()===""){fcg.mdg.editbp.handlers.Communication.handleDisableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);}else if(sap.ui.getCore().byId("INP-BP_CommURI-URI-0").getValue()!==""){fcg.mdg.editbp.handlers.Communication.handleEnableIcon("uriCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementUri);if(this.aRemoveFields.length!==0)this.checkDataExsistinRemoveArrary(e,i.split('-')[3]);}break;case'BP_CommEMail':if(sap.ui.getCore().byId("INP-BP_CommEMail-E_MAIL-0").getValue()===""){fcg.mdg.editbp.handlers.Communication.handleDisableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);}else if(sap.ui.getCore().byId("INP-BP_CommEMail-E_MAIL-0").getValue()!==""){fcg.mdg.editbp.handlers.Communication.handleEnableIcon("emailCancel",fcg.mdg.editbp.handlers.Communication.removeFormElementEmail);if(this.aRemoveFields.length!==0)this.checkDataExsistinRemoveArrary(e,i.split('-')[3]);}break;}},getWizardInstance:function(){return this.oController;},setCommDefaultCountry:function(r,m){for(var i=0;i<r.length;i++){if(r[i].COUNTRY===""){if(r[i].TELEPHONE!==undefined){if(r[i].TELEPHONE!=="")r[i].COUNTRY=m.getData().COUNTRY;}if(r[i].FAX!==undefined){if(r[i].FAX!=="")r[i].COUNTRY=m.getData().COUNTRY;}}}return r;},onEmailChange:function(e){var a=e.getParameters().id;a=sap.ui.getCore().byId(a);var w=fcg.mdg.editbp.handlers.Communication.getWizardInstance();var b=a.getValue();if(b.replace(/^[ ]+|[ ]+$/g,'')===""){a.setValue("");}if(a.getValue()!==""){var E=fcg.mdg.editbp.util.Formatter.checkEmail(b);if(E===false){a.setValueState("Error");fcg.mdg.editbp.handlers.Communication.aErrorStateFlag.push(e.getSource().getId()+":"+true);a.setValueStateText(w.i18nBundle.getText("EMAIL_CHECK"));}else{a.setValueState("None");a.setValueStateText();w.onChange(e);}}else{a.setValueState("None");a.setValueStateText();w.onChange(e);}},setIavArray:function(r){var a=[];for(var i=0;i<r.length;i++){a.push(r[i]);}fcg.mdg.editbp.handlers.Communication.oValueHelpAddressVersion.results=a;},performUIValidations:function(w){if(sap.ui.getCore().byId("INP-BP_Address-POSTL_COD1")!==undefined){if(sap.ui.getCore().byId("INP-BP_Address-POSTL_COD1").getValueState()!=="None"){this.showPopUp(w,sap.ui.getCore().byId("INP-BP_Address-POSTL_COD1").getValueStateText());return false;}}if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY")!==undefined){if(sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValueState()!=="None"){this.showPopUp(w,sap.ui.getCore().byId("INP-BP_Address-COUNTRY").getValueStateText());return false;}}if(sap.ui.getCore().byId("INP-BP_Address-REGION")!==undefined){if(sap.ui.getCore().byId("INP-BP_Address-REGION").getValueState()!=="None"){this.showPopUp(w,sap.ui.getCore().byId("INP-BP_Address-REGION").getValueStateText());return false;}}},showPopUp:function(w,t){var d=new sap.m.Dialog({title:w.i18nBundle.getText("ERROR"),type:"Message",state:w.i18nBundle.getText("ERROR"),content:[new sap.m.Text({text:t})],beginButton:new sap.m.Button({text:w.i18nBundle.getText("OK"),press:function(){d.close();}}),afterClose:function(){d.destroy();}});d.open();}};
